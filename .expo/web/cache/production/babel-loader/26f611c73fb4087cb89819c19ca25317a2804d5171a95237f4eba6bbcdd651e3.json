{"ast":null,"code":"'use strict';import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import{initialUpdaterRun}from\"../animation/index.js\";import{isSharedValue}from\"../isSharedValue.js\";import{isChromeDebugger}from\"../PlatformChecker.js\";import{WorkletEventHandler}from\"../WorkletEventHandler.js\";import{getInlineStyle,hasInlineStyles}from\"./InlinePropManager.js\";import{flattenArray,has}from\"./utils.js\";function dummyListener(){}export var PropsFilter=function(){function PropsFilter(){_classCallCheck(this,PropsFilter);this._initialStyle={};}return _createClass(PropsFilter,[{key:\"filterNonAnimatedProps\",value:function filterNonAnimatedProps(component){var _this=this;var inputProps=component.props;var props={};var _loop=function _loop(){var value=inputProps[key];if(key==='style'){var styleProp=inputProps.style;var styles=flattenArray(styleProp!=null?styleProp:[]);var processedStyle=styles.map(function(style){if(style&&style.viewDescriptors){if(component._isFirstRender){_this._initialStyle=_objectSpread(_objectSpread(_objectSpread({},style.initial.value),_this._initialStyle),initialUpdaterRun(style.initial.updater));}return _this._initialStyle;}else if(hasInlineStyles(style)){return getInlineStyle(style,component._isFirstRender);}else{return style;}});props[key]=StyleSheet.flatten(processedStyle);}else if(key==='animatedProps'){var animatedProp=inputProps.animatedProps;if(animatedProp.initial!==undefined){Object.keys(animatedProp.initial.value).forEach(function(initialValueKey){var _animatedProp$initial;props[initialValueKey]=(_animatedProp$initial=animatedProp.initial)==null?void 0:_animatedProp$initial.value[initialValueKey];});}}else if(has('workletEventHandler',value)&&value.workletEventHandler instanceof WorkletEventHandler){if(value.workletEventHandler.eventNames.length>0){value.workletEventHandler.eventNames.forEach(function(eventName){props[eventName]=has('listeners',value.workletEventHandler)?value.workletEventHandler.listeners[eventName]:dummyListener;});}else{props[key]=dummyListener;}}else if(isSharedValue(value)){if(component._isFirstRender){props[key]=value.value;}}else if(key!=='onGestureHandlerStateChange'||!isChromeDebugger()){props[key]=value;}};for(var key in inputProps){_loop();}return props;}}]);}();","map":{"version":3,"names":["_defineProperty","_classCallCheck","_createClass","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","StyleSheet","initialUpdaterRun","isSharedValue","isChromeDebugger","WorkletEventHandler","getInlineStyle","hasInlineStyles","flattenArray","has","dummyListener","PropsFilter","_initialStyle","key","value","filterNonAnimatedProps","component","_this","inputProps","props","_loop","styleProp","style","styles","processedStyle","map","viewDescriptors","_isFirstRender","initial","updater","flatten","animatedProp","animatedProps","undefined","initialValueKey","_animatedProp$initial","workletEventHandler","eventNames","eventName","listeners"],"sources":["C:\\Users\\Jorn\\Documents\\hitster\\node_modules\\react-native-reanimated\\src\\createAnimatedComponent\\PropsFilter.tsx"],"sourcesContent":["'use strict';\n\nimport { StyleSheet } from 'react-native';\n\nimport { initialUpdaterRun } from '../animation';\nimport type { StyleProps } from '../commonTypes';\nimport { isSharedValue } from '../isSharedValue';\nimport { isChromeDebugger } from '../PlatformChecker';\nimport { WorkletEventHandler } from '../WorkletEventHandler';\nimport type {\n  AnimatedComponentProps,\n  AnimatedProps,\n  IAnimatedComponentInternal,\n  InitialComponentProps,\n  IPropsFilter,\n} from './commonTypes';\nimport { getInlineStyle, hasInlineStyles } from './InlinePropManager';\nimport { flattenArray, has } from './utils';\n\nfunction dummyListener() {\n  // empty listener we use to assign to listener properties for which animated\n  // event is used.\n}\n\nexport class PropsFilter implements IPropsFilter {\n  private _initialStyle = {};\n\n  public filterNonAnimatedProps(\n    component: React.Component<unknown, unknown> & IAnimatedComponentInternal\n  ): Record<string, unknown> {\n    const inputProps =\n      component.props as AnimatedComponentProps<InitialComponentProps>;\n    const props: Record<string, unknown> = {};\n    for (const key in inputProps) {\n      const value = inputProps[key];\n      if (key === 'style') {\n        const styleProp = inputProps.style;\n        const styles = flattenArray<StyleProps>(styleProp ?? []);\n        const processedStyle: StyleProps[] = styles.map((style) => {\n          if (style && style.viewDescriptors) {\n            // this is how we recognize styles returned by useAnimatedStyle\n            if (component._isFirstRender) {\n              this._initialStyle = {\n                ...style.initial.value,\n                ...this._initialStyle,\n                ...initialUpdaterRun<StyleProps>(style.initial.updater),\n              };\n            }\n            return this._initialStyle;\n          } else if (hasInlineStyles(style)) {\n            return getInlineStyle(style, component._isFirstRender);\n          } else {\n            return style;\n          }\n        });\n        props[key] = StyleSheet.flatten(processedStyle);\n      } else if (key === 'animatedProps') {\n        const animatedProp = inputProps.animatedProps as Partial<\n          AnimatedComponentProps<AnimatedProps>\n        >;\n        if (animatedProp.initial !== undefined) {\n          Object.keys(animatedProp.initial.value).forEach((initialValueKey) => {\n            props[initialValueKey] =\n              animatedProp.initial?.value[initialValueKey];\n          });\n        }\n      } else if (\n        has('workletEventHandler', value) &&\n        value.workletEventHandler instanceof WorkletEventHandler\n      ) {\n        if (value.workletEventHandler.eventNames.length > 0) {\n          value.workletEventHandler.eventNames.forEach((eventName) => {\n            props[eventName] = has('listeners', value.workletEventHandler)\n              ? (\n                  value.workletEventHandler.listeners as Record<string, unknown>\n                )[eventName]\n              : dummyListener;\n          });\n        } else {\n          props[key] = dummyListener;\n        }\n      } else if (isSharedValue(value)) {\n        if (component._isFirstRender) {\n          props[key] = value.value;\n        }\n      } else if (key !== 'onGestureHandlerStateChange' || !isChromeDebugger()) {\n        props[key] = value;\n      }\n    }\n    return props;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}