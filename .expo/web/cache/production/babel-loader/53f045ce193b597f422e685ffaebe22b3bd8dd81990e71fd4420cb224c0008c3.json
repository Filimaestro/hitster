{"ast":null,"code":"'use strict';import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import Platform from\"react-native-web/dist/exports/Platform\";import{registerEventHandler,unregisterEventHandler}from\"../../core.js\";import{ReanimatedError}from\"../../errors.js\";import{isJest,shouldBeUseWeb}from\"../../PlatformChecker.js\";import{runOnUIImmediately}from\"../../threads.js\";var IS_ANDROID=\"web\"==='android';var _worklet_5709970646903_init_data={code:\"function ProgressTransitionManagerJs1(){const{viewTag,progressAnimation}=this.__closure;global.ProgressTransitionRegister.addProgressAnimation(viewTag,progressAnimation);}\"};var _worklet_7528792784723_init_data={code:\"function ProgressTransitionManagerJs2(){const{viewTag,isUnmounting}=this.__closure;global.ProgressTransitionRegister.removeProgressAnimation(viewTag,isUnmounting);}\"};var _worklet_1812176989708_init_data={code:\"function ProgressTransitionManagerJs3(event){const{lastProgressValue}=this.__closure;const progress=event.progress;if(progress===lastProgressValue){return;}lastProgressValue=progress;global.ProgressTransitionRegister.frame(progress);}\"};var _worklet_12704473041509_init_data={code:\"function ProgressTransitionManagerJs4(){global.ProgressTransitionRegister.onTransitionEnd();}\"};var _worklet_9409079992067_init_data={code:\"function ProgressTransitionManagerJs5(){global.ProgressTransitionRegister.onAndroidFinishTransitioning();}\"};var _worklet_3077692692177_init_data={code:\"function ProgressTransitionManagerJs6(){global.ProgressTransitionRegister.onTransitionEnd(true);}\"};var _worklet_15551717441510_init_data={code:\"function ProgressTransitionManagerJs7(){global.ProgressTransitionRegister.onTransitionEnd();}\"};export var ProgressTransitionManager=function(){function ProgressTransitionManager(){_classCallCheck(this,ProgressTransitionManager);this._sharedElementCount=0;this._eventHandler={isRegistered:false,onTransitionProgress:-1,onAppear:-1,onDisappear:-1,onSwipeDismiss:-1};}return _createClass(ProgressTransitionManager,[{key:\"addProgressAnimation\",value:function addProgressAnimation(viewTag,progressAnimation){runOnUIImmediately(function(){var ProgressTransitionManagerJs1=function ProgressTransitionManagerJs1(){global.ProgressTransitionRegister.addProgressAnimation(viewTag,progressAnimation);};ProgressTransitionManagerJs1.__closure={viewTag:viewTag,progressAnimation:progressAnimation};ProgressTransitionManagerJs1.__workletHash=5709970646903;ProgressTransitionManagerJs1.__initData=_worklet_5709970646903_init_data;return ProgressTransitionManagerJs1;}())();this.registerEventHandlers();}},{key:\"removeProgressAnimation\",value:function removeProgressAnimation(viewTag){var isUnmounting=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.unregisterEventHandlers();runOnUIImmediately(function(){var ProgressTransitionManagerJs2=function ProgressTransitionManagerJs2(){global.ProgressTransitionRegister.removeProgressAnimation(viewTag,isUnmounting);};ProgressTransitionManagerJs2.__closure={viewTag:viewTag,isUnmounting:isUnmounting};ProgressTransitionManagerJs2.__workletHash=7528792784723;ProgressTransitionManagerJs2.__initData=_worklet_7528792784723_init_data;return ProgressTransitionManagerJs2;}())();}},{key:\"registerEventHandlers\",value:function registerEventHandlers(){this._sharedElementCount++;var eventHandler=this._eventHandler;if(!eventHandler.isRegistered){eventHandler.isRegistered=true;var eventPrefix=IS_ANDROID?'on':'top';var lastProgressValue=-1;eventHandler.onTransitionProgress=registerEventHandler(function(){var ProgressTransitionManagerJs3=function ProgressTransitionManagerJs3(event){var progress=event.progress;if(progress===lastProgressValue){return;}lastProgressValue=progress;global.ProgressTransitionRegister.frame(progress);};ProgressTransitionManagerJs3.__closure={lastProgressValue:lastProgressValue};ProgressTransitionManagerJs3.__workletHash=1812176989708;ProgressTransitionManagerJs3.__initData=_worklet_1812176989708_init_data;return ProgressTransitionManagerJs3;}(),eventPrefix+'TransitionProgress');eventHandler.onAppear=registerEventHandler(function(){var ProgressTransitionManagerJs4=function ProgressTransitionManagerJs4(){global.ProgressTransitionRegister.onTransitionEnd();};ProgressTransitionManagerJs4.__closure={};ProgressTransitionManagerJs4.__workletHash=12704473041509;ProgressTransitionManagerJs4.__initData=_worklet_12704473041509_init_data;return ProgressTransitionManagerJs4;}(),eventPrefix+'Appear');if(IS_ANDROID){eventHandler.onDisappear=registerEventHandler(function(){var ProgressTransitionManagerJs5=function ProgressTransitionManagerJs5(){global.ProgressTransitionRegister.onAndroidFinishTransitioning();};ProgressTransitionManagerJs5.__closure={};ProgressTransitionManagerJs5.__workletHash=9409079992067;ProgressTransitionManagerJs5.__initData=_worklet_9409079992067_init_data;return ProgressTransitionManagerJs5;}(),'onFinishTransitioning');}else if(\"web\"==='ios'){eventHandler.onDisappear=registerEventHandler(function(){var ProgressTransitionManagerJs6=function ProgressTransitionManagerJs6(){global.ProgressTransitionRegister.onTransitionEnd(true);};ProgressTransitionManagerJs6.__closure={};ProgressTransitionManagerJs6.__workletHash=3077692692177;ProgressTransitionManagerJs6.__initData=_worklet_3077692692177_init_data;return ProgressTransitionManagerJs6;}(),'topDisappear');eventHandler.onSwipeDismiss=registerEventHandler(function(){var ProgressTransitionManagerJs7=function ProgressTransitionManagerJs7(){global.ProgressTransitionRegister.onTransitionEnd();};ProgressTransitionManagerJs7.__closure={};ProgressTransitionManagerJs7.__workletHash=15551717441510;ProgressTransitionManagerJs7.__initData=_worklet_15551717441510_init_data;return ProgressTransitionManagerJs7;}(),'topGestureCancel');}}}},{key:\"unregisterEventHandlers\",value:function unregisterEventHandlers(){this._sharedElementCount--;if(this._sharedElementCount===0){var eventHandler=this._eventHandler;eventHandler.isRegistered=false;if(eventHandler.onTransitionProgress!==-1){unregisterEventHandler(eventHandler.onTransitionProgress);eventHandler.onTransitionProgress=-1;}if(eventHandler.onAppear!==-1){unregisterEventHandler(eventHandler.onAppear);eventHandler.onAppear=-1;}if(eventHandler.onDisappear!==-1){unregisterEventHandler(eventHandler.onDisappear);eventHandler.onDisappear=-1;}if(eventHandler.onSwipeDismiss!==-1){unregisterEventHandler(eventHandler.onSwipeDismiss);eventHandler.onSwipeDismiss=-1;}}}}]);}();var _worklet_10744455887744_init_data={code:\"function createProgressTransitionRegister_ProgressTransitionManagerJs8(){const{IS_ANDROID}=this.__closure;const progressAnimations=new Map();const snapshots=new Map();const currentTransitions=new Set();const toRemove=new Set();let skipCleaning=false;let isTransitionRestart=false;const progressTransitionManager={addProgressAnimation:function(viewTag,progressAnimation){if(currentTransitions.size>0&&!progressAnimations.has(viewTag)){isTransitionRestart=!IS_ANDROID;}progressAnimations.set(viewTag,progressAnimation);},removeProgressAnimation:function(viewTag,isUnmounting){if(currentTransitions.size>0){isTransitionRestart=!IS_ANDROID;}if(isUnmounting){toRemove.add(viewTag);}else{progressAnimations.delete(viewTag);}},onTransitionStart:function(viewTag,snapshot){skipCleaning=isTransitionRestart;snapshots.set(viewTag,snapshot);currentTransitions.add(viewTag);progressTransitionManager.frame(0);},frame:function(progress){for(const viewTag of currentTransitions){const progressAnimation=progressAnimations.get(viewTag);if(!progressAnimation){continue;}const snapshot=snapshots.get(viewTag);progressAnimation(viewTag,snapshot,progress);}},onAndroidFinishTransitioning:function(){if(toRemove.size>0){progressTransitionManager.onTransitionEnd();}},onTransitionEnd:function(removeViews=false){if(currentTransitions.size===0){toRemove.clear();return;}if(skipCleaning){skipCleaning=false;isTransitionRestart=false;return;}for(const viewTag of currentTransitions){global._notifyAboutEnd(viewTag,removeViews);}currentTransitions.clear();if(isTransitionRestart){return;}snapshots.clear();if(toRemove.size>0){for(const viewTag of toRemove){progressAnimations.delete(viewTag);global._notifyAboutEnd(viewTag,removeViews);}toRemove.clear();}}};return progressTransitionManager;}\"};var createProgressTransitionRegister=function(){var createProgressTransitionRegister=function createProgressTransitionRegister(){var progressAnimations=new Map();var snapshots=new Map();var currentTransitions=new Set();var toRemove=new Set();var skipCleaning=false;var isTransitionRestart=false;var progressTransitionManager={addProgressAnimation:function addProgressAnimation(viewTag,progressAnimation){if(currentTransitions.size>0&&!progressAnimations.has(viewTag)){isTransitionRestart=!IS_ANDROID;}progressAnimations.set(viewTag,progressAnimation);},removeProgressAnimation:function removeProgressAnimation(viewTag,isUnmounting){if(currentTransitions.size>0){isTransitionRestart=!IS_ANDROID;}if(isUnmounting){toRemove.add(viewTag);}else{progressAnimations.delete(viewTag);}},onTransitionStart:function onTransitionStart(viewTag,snapshot){skipCleaning=isTransitionRestart;snapshots.set(viewTag,snapshot);currentTransitions.add(viewTag);progressTransitionManager.frame(0);},frame:function frame(progress){for(var viewTag of currentTransitions){var progressAnimation=progressAnimations.get(viewTag);if(!progressAnimation){continue;}var snapshot=snapshots.get(viewTag);progressAnimation(viewTag,snapshot,progress);}},onAndroidFinishTransitioning:function onAndroidFinishTransitioning(){if(toRemove.size>0){progressTransitionManager.onTransitionEnd();}},onTransitionEnd:function onTransitionEnd(){var removeViews=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(currentTransitions.size===0){toRemove.clear();return;}if(skipCleaning){skipCleaning=false;isTransitionRestart=false;return;}for(var viewTag of currentTransitions){global._notifyAboutEnd(viewTag,removeViews);}currentTransitions.clear();if(isTransitionRestart){return;}snapshots.clear();if(toRemove.size>0){for(var _viewTag of toRemove){progressAnimations.delete(_viewTag);global._notifyAboutEnd(_viewTag,removeViews);}toRemove.clear();}}};return progressTransitionManager;};createProgressTransitionRegister.__closure={IS_ANDROID:IS_ANDROID};createProgressTransitionRegister.__workletHash=10744455887744;createProgressTransitionRegister.__initData=_worklet_10744455887744_init_data;return createProgressTransitionRegister;}();var _worklet_17276620694150_init_data={code:\"function ProgressTransitionManagerJs9(){const{createProgressTransitionRegister}=this.__closure;global.ProgressTransitionRegister=createProgressTransitionRegister();}\"};if(shouldBeUseWeb()){var maybeThrowError=function maybeThrowError(){if(!isJest()){throw new ReanimatedError('`ProgressTransitionRegister` is not available on non-native platform.');}};global.ProgressTransitionRegister=new Proxy({},{get:maybeThrowError,set:function set(){maybeThrowError();return false;}});}else{runOnUIImmediately(function(){var ProgressTransitionManagerJs9=function ProgressTransitionManagerJs9(){global.ProgressTransitionRegister=createProgressTransitionRegister();};ProgressTransitionManagerJs9.__closure={createProgressTransitionRegister:createProgressTransitionRegister};ProgressTransitionManagerJs9.__workletHash=17276620694150;ProgressTransitionManagerJs9.__initData=_worklet_17276620694150_init_data;return ProgressTransitionManagerJs9;}())();}","map":{"version":3,"names":["_classCallCheck","_createClass","Platform","registerEventHandler","unregisterEventHandler","ReanimatedError","isJest","shouldBeUseWeb","runOnUIImmediately","IS_ANDROID","_worklet_5709970646903_init_data","code","_worklet_7528792784723_init_data","_worklet_1812176989708_init_data","_worklet_12704473041509_init_data","_worklet_9409079992067_init_data","_worklet_3077692692177_init_data","_worklet_15551717441510_init_data","ProgressTransitionManager","_sharedElementCount","_eventHandler","isRegistered","onTransitionProgress","onAppear","onDisappear","onSwipeDismiss","key","value","addProgressAnimation","viewTag","progressAnimation","ProgressTransitionManagerJs1","global","ProgressTransitionRegister","__closure","__workletHash","__initData","registerEventHandlers","removeProgressAnimation","isUnmounting","arguments","length","undefined","unregisterEventHandlers","ProgressTransitionManagerJs2","eventHandler","eventPrefix","lastProgressValue","ProgressTransitionManagerJs3","event","progress","frame","ProgressTransitionManagerJs4","onTransitionEnd","ProgressTransitionManagerJs5","onAndroidFinishTransitioning","ProgressTransitionManagerJs6","ProgressTransitionManagerJs7","_worklet_10744455887744_init_data","createProgressTransitionRegister","progressAnimations","Map","snapshots","currentTransitions","Set","toRemove","skipCleaning","isTransitionRestart","progressTransitionManager","size","has","set","add","delete","onTransitionStart","snapshot","get","removeViews","clear","_notifyAboutEnd","_worklet_17276620694150_init_data","maybeThrowError","Proxy","ProgressTransitionManagerJs9"],"sources":["C:\\Users\\Jorn\\Documents\\hitster\\node_modules\\react-native-reanimated\\src\\layoutReanimation\\sharedTransitions\\ProgressTransitionManager.ts"],"sourcesContent":["'use strict';\nimport { Platform } from 'react-native';\n\nimport type {\n  ProgressAnimation,\n  SharedTransitionAnimationsValues,\n} from '../../commonTypes';\nimport { registerEventHandler, unregisterEventHandler } from '../../core';\nimport { ReanimatedError } from '../../errors';\nimport { isJest, shouldBeUseWeb } from '../../PlatformChecker';\nimport { runOnUIImmediately } from '../../threads';\n\ntype TransitionProgressEvent = {\n  closing: number;\n  goingForward: number;\n  eventName: string;\n  progress: number;\n  target: number;\n};\n\nconst IS_ANDROID = Platform.OS === 'android';\n\nexport class ProgressTransitionManager {\n  private _sharedElementCount = 0;\n  private _eventHandler = {\n    isRegistered: false,\n    onTransitionProgress: -1,\n    onAppear: -1,\n    onDisappear: -1,\n    onSwipeDismiss: -1,\n  };\n\n  public addProgressAnimation(\n    viewTag: number,\n    progressAnimation: ProgressAnimation\n  ) {\n    runOnUIImmediately(() => {\n      'worklet';\n      global.ProgressTransitionRegister.addProgressAnimation(\n        viewTag,\n        progressAnimation\n      );\n    })();\n\n    this.registerEventHandlers();\n  }\n\n  public removeProgressAnimation(viewTag: number, isUnmounting = true) {\n    this.unregisterEventHandlers();\n    runOnUIImmediately(() => {\n      'worklet';\n      global.ProgressTransitionRegister.removeProgressAnimation(\n        viewTag,\n        isUnmounting\n      );\n    })();\n  }\n\n  private registerEventHandlers() {\n    this._sharedElementCount++;\n    const eventHandler = this._eventHandler;\n    if (!eventHandler.isRegistered) {\n      eventHandler.isRegistered = true;\n      const eventPrefix = IS_ANDROID ? 'on' : 'top';\n      let lastProgressValue = -1;\n      eventHandler.onTransitionProgress = registerEventHandler(\n        (event: TransitionProgressEvent) => {\n          'worklet';\n          const progress = event.progress;\n          if (progress === lastProgressValue) {\n            // During screen transition, handler receives two events with the same progress\n            // value for both screens, but for modals, there is only one event. To optimize\n            // performance and avoid unnecessary worklet calls, let's skip the second event.\n            return;\n          }\n          lastProgressValue = progress;\n          global.ProgressTransitionRegister.frame(progress);\n        },\n        eventPrefix + 'TransitionProgress'\n      );\n      eventHandler.onAppear = registerEventHandler(() => {\n        'worklet';\n        global.ProgressTransitionRegister.onTransitionEnd();\n      }, eventPrefix + 'Appear');\n\n      if (IS_ANDROID) {\n        // onFinishTransitioning event is available only on Android and\n        // is used to handle closing modals\n        eventHandler.onDisappear = registerEventHandler(() => {\n          'worklet';\n          global.ProgressTransitionRegister.onAndroidFinishTransitioning();\n        }, 'onFinishTransitioning');\n      } else if (Platform.OS === 'ios') {\n        // topDisappear event is required to handle closing modals on iOS\n        eventHandler.onDisappear = registerEventHandler(() => {\n          'worklet';\n          global.ProgressTransitionRegister.onTransitionEnd(true);\n        }, 'topDisappear');\n        eventHandler.onSwipeDismiss = registerEventHandler(() => {\n          'worklet';\n          global.ProgressTransitionRegister.onTransitionEnd();\n        }, 'topGestureCancel');\n      }\n    }\n  }\n\n  private unregisterEventHandlers(): void {\n    this._sharedElementCount--;\n    if (this._sharedElementCount === 0) {\n      const eventHandler = this._eventHandler;\n      eventHandler.isRegistered = false;\n      if (eventHandler.onTransitionProgress !== -1) {\n        unregisterEventHandler(eventHandler.onTransitionProgress);\n        eventHandler.onTransitionProgress = -1;\n      }\n      if (eventHandler.onAppear !== -1) {\n        unregisterEventHandler(eventHandler.onAppear);\n        eventHandler.onAppear = -1;\n      }\n      if (eventHandler.onDisappear !== -1) {\n        unregisterEventHandler(eventHandler.onDisappear);\n        eventHandler.onDisappear = -1;\n      }\n      if (eventHandler.onSwipeDismiss !== -1) {\n        unregisterEventHandler(eventHandler.onSwipeDismiss);\n        eventHandler.onSwipeDismiss = -1;\n      }\n    }\n  }\n}\n\nfunction createProgressTransitionRegister() {\n  'worklet';\n  const progressAnimations = new Map<number, ProgressAnimation>();\n  const snapshots = new Map<\n    number,\n    Partial<SharedTransitionAnimationsValues>\n  >();\n  const currentTransitions = new Set<number>();\n  const toRemove = new Set<number>();\n\n  let skipCleaning = false;\n  let isTransitionRestart = false;\n\n  const progressTransitionManager = {\n    addProgressAnimation: (\n      viewTag: number,\n      progressAnimation: ProgressAnimation\n    ) => {\n      if (currentTransitions.size > 0 && !progressAnimations.has(viewTag)) {\n        // there is no need to prevent cleaning on android\n        isTransitionRestart = !IS_ANDROID;\n      }\n      progressAnimations.set(viewTag, progressAnimation);\n    },\n    removeProgressAnimation: (viewTag: number, isUnmounting: boolean) => {\n      if (currentTransitions.size > 0) {\n        // there is no need to prevent cleaning on android\n        isTransitionRestart = !IS_ANDROID;\n      }\n      if (isUnmounting) {\n        // Remove the animation config after the transition is finished\n        toRemove.add(viewTag);\n      } else {\n        // if the animation is removed, without ever being started, it can be removed immediately\n        progressAnimations.delete(viewTag);\n      }\n    },\n    onTransitionStart: (\n      viewTag: number,\n      snapshot: Partial<SharedTransitionAnimationsValues>\n    ) => {\n      skipCleaning = isTransitionRestart;\n      snapshots.set(viewTag, snapshot);\n      currentTransitions.add(viewTag);\n      // set initial style for re-parented components\n      progressTransitionManager.frame(0);\n    },\n    frame: (progress: number) => {\n      for (const viewTag of currentTransitions) {\n        const progressAnimation = progressAnimations.get(viewTag);\n        if (!progressAnimation) {\n          continue;\n        }\n        const snapshot = snapshots.get(\n          viewTag\n        )! as SharedTransitionAnimationsValues;\n        progressAnimation(viewTag, snapshot, progress);\n      }\n    },\n    onAndroidFinishTransitioning: () => {\n      if (toRemove.size > 0) {\n        // it should be ran only on modal closing\n        progressTransitionManager.onTransitionEnd();\n      }\n    },\n    onTransitionEnd: (removeViews = false) => {\n      if (currentTransitions.size === 0) {\n        toRemove.clear();\n        return;\n      }\n      if (skipCleaning) {\n        skipCleaning = false;\n        isTransitionRestart = false;\n        return;\n      }\n      for (const viewTag of currentTransitions) {\n        global._notifyAboutEnd(viewTag, removeViews);\n      }\n      currentTransitions.clear();\n      if (isTransitionRestart) {\n        // on transition restart, progressAnimations should be saved\n        // because they potentially can be used in the next transition\n        return;\n      }\n      snapshots.clear();\n      if (toRemove.size > 0) {\n        for (const viewTag of toRemove) {\n          progressAnimations.delete(viewTag);\n          global._notifyAboutEnd(viewTag, removeViews);\n        }\n        toRemove.clear();\n      }\n    },\n  };\n  return progressTransitionManager;\n}\n\nif (shouldBeUseWeb()) {\n  const maybeThrowError = () => {\n    // Jest attempts to access a property of this object to check if it is a Jest mock\n    // so we can't throw an error in the getter.\n    if (!isJest()) {\n      throw new ReanimatedError(\n        '`ProgressTransitionRegister` is not available on non-native platform.'\n      );\n    }\n  };\n  global.ProgressTransitionRegister = new Proxy(\n    {} as ProgressTransitionRegister,\n    {\n      get: maybeThrowError,\n      set: () => {\n        maybeThrowError();\n        return false;\n      },\n    }\n  );\n} else {\n  runOnUIImmediately(() => {\n    'worklet';\n    global.ProgressTransitionRegister = createProgressTransitionRegister();\n  })();\n}\n\nexport type ProgressTransitionRegister = ReturnType<\n  typeof createProgressTransitionRegister\n>;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}