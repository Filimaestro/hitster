{"ast":null,"code":"'use strict';import{WorkletEventHandler}from\"../WorkletEventHandler.js\";import{useEvent}from\"./useEvent.js\";import{useHandler}from\"./useHandler.js\";var _worklet_10072825819171_init_data={code:\"function useComposedEventHandlerJs1(event){const{workletsMap}=this.__closure;if(workletsMap[event.eventName]){workletsMap[event.eventName].forEach(function(worklet){return worklet(event);});}}\"};export function useComposedEventHandler(handlers){var workletsRecord={};var composedEventNames=new Set();var workletsMap={};handlers.filter(function(h){return h!==null;}).forEach(function(handler){var workletEventHandler=handler.workletEventHandler;if(workletEventHandler instanceof WorkletEventHandler){workletEventHandler.eventNames.forEach(function(eventName){composedEventNames.add(eventName);if(workletsMap[eventName]){workletsMap[eventName].push(workletEventHandler.worklet);}else{workletsMap[eventName]=[workletEventHandler.worklet];}var handlerName=eventName+`${workletsMap[eventName].length}`;workletsRecord[handlerName]=workletEventHandler.worklet;});}});var _useHandler=useHandler(workletsRecord),doDependenciesDiffer=_useHandler.doDependenciesDiffer;return useEvent(function(){var useComposedEventHandlerJs1=function useComposedEventHandlerJs1(event){if(workletsMap[event.eventName]){workletsMap[event.eventName].forEach(function(worklet){return worklet(event);});}};useComposedEventHandlerJs1.__closure={workletsMap:workletsMap};useComposedEventHandlerJs1.__workletHash=10072825819171;useComposedEventHandlerJs1.__initData=_worklet_10072825819171_init_data;return useComposedEventHandlerJs1;}(),Array.from(composedEventNames),doDependenciesDiffer);}","map":{"version":3,"names":["WorkletEventHandler","useEvent","useHandler","_worklet_10072825819171_init_data","code","useComposedEventHandler","handlers","workletsRecord","composedEventNames","Set","workletsMap","filter","h","forEach","handler","workletEventHandler","eventNames","eventName","add","push","worklet","handlerName","length","_useHandler","doDependenciesDiffer","useComposedEventHandlerJs1","event","__closure","__workletHash","__initData","Array","from"],"sources":["C:\\Users\\Jorn\\Documents\\hitster\\node_modules\\react-native-reanimated\\src\\hook\\useComposedEventHandler.ts"],"sourcesContent":["'use strict';\nimport type { WorkletFunction } from '../commonTypes';\nimport { WorkletEventHandler } from '../WorkletEventHandler';\nimport type { ReanimatedEvent } from './commonTypes';\nimport type { EventHandlerInternal, EventHandlerProcessed } from './useEvent';\nimport { useEvent } from './useEvent';\nimport { useHandler } from './useHandler';\n\ntype ComposedHandlerProcessed<\n  Event extends object,\n  Context extends Record<string, unknown> = Record<string, unknown>,\n> = EventHandlerProcessed<Event, Context>;\n\ntype ComposedHandlerInternal<Event extends object> =\n  EventHandlerInternal<Event>;\n\n/**\n * Lets you compose multiple event handlers based on\n * [useEvent](https://docs.swmansion.com/react-native-reanimated/docs/advanced/useEvent)\n * hook.\n *\n * @param handlers - An array of event handlers created using\n *   [useEvent](https://docs.swmansion.com/react-native-reanimated/docs/advanced/useEvent)\n *   hook.\n * @returns An object you need to pass to a coresponding \"onEvent\" prop on an\n *   `Animated` component (for example handlers responsible for `onScroll` event\n *   go to `onScroll` prop).\n * @see https://docs.swmansion.com/react-native-reanimated/docs/advanced/useComposedEventHandler\n */\n// @ts-expect-error This overload is required by our API.\nexport function useComposedEventHandler<\n  Event extends object,\n  Context extends Record<string, unknown>,\n>(\n  handlers: (EventHandlerProcessed<Event, Context> | null)[]\n): ComposedHandlerProcessed<Event, Context>;\n\nexport function useComposedEventHandler<\n  Event extends object,\n  Context extends Record<string, unknown>,\n>(handlers: (EventHandlerProcessed<Event, Context> | null)[]) {\n  // Record of handlers' worklets to calculate deps diffs. We use the record type to match the useHandler API requirements\n  const workletsRecord: Record<string, WorkletFunction> = {};\n  // Summed event names for registration\n  const composedEventNames = new Set<string>();\n  // Map that holds worklets for specific handled events\n  const workletsMap: {\n    [key: string]: ((event: ReanimatedEvent<Event>) => void)[];\n  } = {};\n\n  handlers\n    .filter((h) => h !== null)\n    .forEach((handler) => {\n      // EventHandlerProcessed is the return type of useEvent and has to be force casted to EventHandlerInternal, because we need WorkletEventHandler object\n      const { workletEventHandler } =\n        handler as unknown as EventHandlerInternal<Context>;\n      if (workletEventHandler instanceof WorkletEventHandler) {\n        workletEventHandler.eventNames.forEach((eventName) => {\n          composedEventNames.add(eventName);\n\n          if (workletsMap[eventName]) {\n            workletsMap[eventName].push(workletEventHandler.worklet);\n          } else {\n            workletsMap[eventName] = [workletEventHandler.worklet];\n          }\n\n          const handlerName = eventName + `${workletsMap[eventName].length}`;\n          workletsRecord[handlerName] =\n            workletEventHandler.worklet as WorkletFunction;\n        });\n      }\n    });\n\n  const { doDependenciesDiffer } = useHandler(workletsRecord);\n\n  return useEvent<Event, Context>(\n    (event) => {\n      'worklet';\n      if (workletsMap[event.eventName]) {\n        workletsMap[event.eventName].forEach((worklet) => worklet(event));\n      }\n    },\n    Array.from(composedEventNames),\n    doDependenciesDiffer\n  ) as unknown as ComposedHandlerInternal<Event>;\n}\n"],"mappings":"AAAA,YAAY,CAEZ,OAASA,mBAAmB,KAAQ,2BAAwB,CAG5D,OAASC,QAAQ,KAAQ,eAAY,CACrC,OAASC,UAAU,KAAQ,iBAAc,KAAAC,iCAAA,EAAAC,IAAA,qMA+BzC,MAAO,SAAS,CAAAC,uBAAuBA,CAGrCC,QAA0D,CAAE,CAE5D,GAAM,CAAAC,cAA+C,CAAG,CAAC,CAAC,CAE1D,GAAM,CAAAC,kBAAkB,CAAG,GAAI,CAAAC,GAAG,CAAS,CAAC,CAE5C,GAAM,CAAAC,WAEL,CAAG,CAAC,CAAC,CAENJ,QAAQ,CACLK,MAAM,CAAE,SAAAC,CAAC,QAAK,CAAAA,CAAC,GAAK,IAAI,GAAC,CACzBC,OAAO,CAAE,SAAAC,OAAO,CAAK,CAEpB,GAAQ,CAAAC,mBAAA,CACND,OAAmD,CAD7CC,mBAAA,CAER,GAAIA,mBAAmB,WAAY,CAAAf,mBAAmB,CAAE,CACtDe,mBAAmB,CAACC,UAAU,CAACH,OAAO,CAAE,SAAAI,SAAS,CAAK,CACpDT,kBAAkB,CAACU,GAAG,CAACD,SAAS,CAAC,CAEjC,GAAIP,WAAW,CAACO,SAAS,CAAC,CAAE,CAC1BP,WAAW,CAACO,SAAS,CAAC,CAACE,IAAI,CAACJ,mBAAmB,CAACK,OAAO,CAAC,CAC1D,CAAC,IAAM,CACLV,WAAW,CAACO,SAAS,CAAC,CAAG,CAACF,mBAAmB,CAACK,OAAO,CAAC,CACxD,CAEA,GAAM,CAAAC,WAAW,CAAGJ,SAAS,CAAG,GAAGP,WAAW,CAACO,SAAS,CAAC,CAACK,MAAM,EAAE,CAClEf,cAAc,CAACc,WAAW,CAAC,CACzBN,mBAAmB,CAACK,OAA0B,CAClD,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CAEJ,IAAAG,WAAA,CAAiCrB,UAAU,CAACK,cAAc,CAAC,CAAnDiB,oBAAA,CAAAD,WAAA,CAAAC,oBAAA,CAER,MAAO,CAAAvB,QAAQ,CACZ,eAAAwB,0BAAA,UAAAA,2BAAAC,KAAK,CAAK,CAET,GAAIhB,WAAW,CAACgB,KAAK,CAACT,SAAS,CAAC,CAAE,CAChCP,WAAW,CAACgB,KAAK,CAACT,SAAS,CAAC,CAACJ,OAAO,CAAE,SAAAO,OAAO,QAAK,CAAAA,OAAO,CAACM,KAAK,CAAC,GAAC,CACnE,CACF,CAAC,CAAAD,0BAAA,CAAAE,SAAA,EAAAjB,WAAA,CAHKA,WAAW,EAAAe,0BAAA,CAAAG,aAAA,gBAAAH,0BAAA,CAAAI,UAAA,CAAA1B,iCAAA,QAAAsB,0BAAA,EAFhB,GAMDK,KAAK,CAACC,IAAI,CAACvB,kBAAkB,CAAC,CAC9BgB,oBACF,CAAC,CACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}