{"ast":null,"code":"'use strict';import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import{isWorkletFunction}from\"./commonTypes.js\";import{ReanimatedError,registerWorkletStackDetails}from\"./errors.js\";import{logger}from\"./logger/index.js\";import{jsVersion}from\"./platform-specific/jsVersion.js\";import{shouldBeUseWeb}from\"./PlatformChecker.js\";import{shareableMappingCache,shareableMappingFlag}from\"./shareableMappingCache.js\";import{WorkletsModule}from\"./worklets/index.js\";var SHOULD_BE_USE_WEB=shouldBeUseWeb();var MAGIC_KEY='REANIMATED_MAGIC_KEY';var _worklet_8151094367428_init_data={code:\"function isHostObject_shareablesJs1(value){const{MAGIC_KEY}=this.__closure;return MAGIC_KEY in value;}\"};var isHostObject=function(){var isHostObject=function isHostObject(value){return MAGIC_KEY in value;};isHostObject.__closure={MAGIC_KEY:MAGIC_KEY};isHostObject.__workletHash=8151094367428;isHostObject.__initData=_worklet_8151094367428_init_data;return isHostObject;}();function isPlainJSObject(object){return Object.getPrototypeOf(object)===Object.prototype;}function getFromCache(value){var cached=shareableMappingCache.get(value);if(cached===shareableMappingFlag){return value;}return cached;}var _worklet_7060032473743_init_data={code:\"function shareablesJs2(){return new Proxy({},{get:function(_,prop){if(prop==='_isReanimatedSharedValue'||prop==='__remoteFunction'){return false;}throw new ReanimatedError(\\\"Trying to access property `\\\"+String(prop)+\\\"` of an object which cannot be sent to the UI runtime.\\\");},set:function(){throw new ReanimatedError('Trying to write to an object which cannot be sent to the UI runtime.');}});}\"};var INACCESSIBLE_OBJECT={__init:function(){var shareablesJs2=function shareablesJs2(){return new Proxy({},{get:function get(_,prop){if(prop==='_isReanimatedSharedValue'||prop==='__remoteFunction'){return false;}throw new ReanimatedError(`Trying to access property \\`${String(prop)}\\` of an object which cannot be sent to the UI runtime.`);},set:function set(){throw new ReanimatedError('Trying to write to an object which cannot be sent to the UI runtime.');}});};shareablesJs2.__closure={};shareablesJs2.__workletHash=7060032473743;shareablesJs2.__initData=_worklet_7060032473743_init_data;return shareablesJs2;}()};var VALID_ARRAY_VIEWS_NAMES=['Int8Array','Uint8Array','Uint8ClampedArray','Int16Array','Uint16Array','Int32Array','Uint32Array','Float32Array','Float64Array','BigInt64Array','BigUint64Array','DataView'];var DETECT_CYCLIC_OBJECT_DEPTH_THRESHOLD=30;var processedObjectAtThresholdDepth;function makeShareableCloneRecursiveWeb(value){return value;}function makeShareableCloneRecursiveNative(value){var shouldPersistRemote=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var depth=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;detectCyclicObject(value,depth);var isObject=typeof value==='object';var isFunction=typeof value==='function';if(!isObject&&!isFunction||value===null){return clonePrimitive(value,shouldPersistRemote);}var cached=getFromCache(value);if(cached!==undefined){return cached;}if(Array.isArray(value)){return cloneArray(value,shouldPersistRemote,depth);}if(isFunction&&!isWorkletFunction(value)){return cloneRemoteFunction(value,shouldPersistRemote);}if(isHostObject(value)){return cloneHostObject(value,shouldPersistRemote);}if(isPlainJSObject(value)&&value.__workletContextObjectFactory){return cloneContextObject(value);}if((isPlainJSObject(value)||isFunction)&&isWorkletFunction(value)){return cloneWorklet(value,shouldPersistRemote,depth);}if(isPlainJSObject(value)||isFunction){return clonePlainJSObject(value,shouldPersistRemote,depth);}if(value instanceof RegExp){return cloneRegExp(value);}if(value instanceof Error){return cloneError(value);}if(value instanceof ArrayBuffer){return cloneArrayBuffer(value,shouldPersistRemote);}if(ArrayBuffer.isView(value)){return cloneArrayBufferView(value);}return inaccessibleObject(value);}export var makeShareableCloneRecursive=SHOULD_BE_USE_WEB?makeShareableCloneRecursiveWeb:makeShareableCloneRecursiveNative;function detectCyclicObject(value,depth){if(depth>=DETECT_CYCLIC_OBJECT_DEPTH_THRESHOLD){if(depth===DETECT_CYCLIC_OBJECT_DEPTH_THRESHOLD){processedObjectAtThresholdDepth=value;}else if(value===processedObjectAtThresholdDepth){throw new ReanimatedError('Trying to convert a cyclic object to a shareable. This is not supported.');}}else{processedObjectAtThresholdDepth=undefined;}}function clonePrimitive(value,shouldPersistRemote){return WorkletsModule.makeShareableClone(value,shouldPersistRemote);}function cloneArray(value,shouldPersistRemote,depth){var clonedElements=value.map(function(element){return makeShareableCloneRecursive(element,shouldPersistRemote,depth+1);});var clone=WorkletsModule.makeShareableClone(clonedElements,shouldPersistRemote,value);shareableMappingCache.set(value,clone);shareableMappingCache.set(clone);freezeObjectInDev(value);return clone;}function cloneRemoteFunction(value,shouldPersistRemote){var clone=WorkletsModule.makeShareableClone(value,shouldPersistRemote,value);shareableMappingCache.set(value,clone);shareableMappingCache.set(clone);freezeObjectInDev(value);return clone;}function cloneHostObject(value,shouldPersistRemote){var clone=WorkletsModule.makeShareableClone(value,shouldPersistRemote,value);shareableMappingCache.set(value,clone);shareableMappingCache.set(clone);return clone;}function cloneWorklet(value,shouldPersistRemote,depth){if(false){var babelVersion=value.__initData.version;if(babelVersion!==undefined&&babelVersion!==jsVersion){throw new ReanimatedError(`[Reanimated] Mismatch between JavaScript code version and Reanimated Babel plugin version (${jsVersion} vs. ${babelVersion}).        \nSee \\`https://docs.swmansion.com/react-native-reanimated/docs/guides/troubleshooting#mismatch-between-javascript-code-version-and-reanimated-babel-plugin-version\\` for more details.\nOffending code was: \\`${getWorkletCode(value)}\\``);}registerWorkletStackDetails(value.__workletHash,value.__stackDetails);}if(value.__stackDetails){delete value.__stackDetails;}var clonedProps={};clonedProps.__initData=makeShareableCloneRecursive(value.__initData,true,depth+1);for(var _ref of Object.entries(value)){var _ref2=_slicedToArray(_ref,2);var key=_ref2[0];var element=_ref2[1];if(key==='__initData'&&clonedProps.__initData!==undefined){continue;}clonedProps[key]=makeShareableCloneRecursive(element,shouldPersistRemote,depth+1);}var clone=WorkletsModule.makeShareableClone(clonedProps,true,value);shareableMappingCache.set(value,clone);shareableMappingCache.set(clone);freezeObjectInDev(value);return clone;}var _worklet_7789420377104_init_data={code:\"function shareablesJs3(){const{workletContextObjectFactory}=this.__closure;return workletContextObjectFactory();}\"};function cloneContextObject(value){var workletContextObjectFactory=value.__workletContextObjectFactory;var handle=makeShareableCloneRecursive({__init:function(){var shareablesJs3=function shareablesJs3(){return workletContextObjectFactory();};shareablesJs3.__closure={workletContextObjectFactory:workletContextObjectFactory};shareablesJs3.__workletHash=7789420377104;shareablesJs3.__initData=_worklet_7789420377104_init_data;return shareablesJs3;}()});shareableMappingCache.set(value,handle);return handle;}function clonePlainJSObject(value,shouldPersistRemote,depth){var clonedProps={};for(var _ref3 of Object.entries(value)){var _ref4=_slicedToArray(_ref3,2);var key=_ref4[0];var element=_ref4[1];if(key==='__initData'&&clonedProps.__initData!==undefined){continue;}clonedProps[key]=makeShareableCloneRecursive(element,shouldPersistRemote,depth+1);}var clone=WorkletsModule.makeShareableClone(clonedProps,shouldPersistRemote,value);shareableMappingCache.set(value,clone);shareableMappingCache.set(clone);freezeObjectInDev(value);return clone;}var _worklet_5975792175190_init_data={code:\"function shareablesJs4(){const{pattern,flags}=this.__closure;return new RegExp(pattern,flags);}\"};function cloneRegExp(value){var pattern=value.source;var flags=value.flags;var handle=makeShareableCloneRecursive({__init:function(){var shareablesJs4=function shareablesJs4(){return new RegExp(pattern,flags);};shareablesJs4.__closure={pattern:pattern,flags:flags};shareablesJs4.__workletHash=5975792175190;shareablesJs4.__initData=_worklet_5975792175190_init_data;return shareablesJs4;}()});shareableMappingCache.set(value,handle);return handle;}var _worklet_14257546745571_init_data={code:\"function shareablesJs5(){const{name,message,stack}=this.__closure;const error=new Error();error.name=name;error.message=message;error.stack=stack;return error;}\"};function cloneError(value){var name=value.name,message=value.message,stack=value.stack;var handle=makeShareableCloneRecursive({__init:function(){var shareablesJs5=function shareablesJs5(){var error=new Error();error.name=name;error.message=message;error.stack=stack;return error;};shareablesJs5.__closure={name:name,message:message,stack:stack};shareablesJs5.__workletHash=14257546745571;shareablesJs5.__initData=_worklet_14257546745571_init_data;return shareablesJs5;}()});shareableMappingCache.set(value,handle);return handle;}function cloneArrayBuffer(value,shouldPersistRemote){var clone=WorkletsModule.makeShareableClone(value,shouldPersistRemote,value);shareableMappingCache.set(value,clone);shareableMappingCache.set(clone);return clone;}var _worklet_11365189564964_init_data={code:\"function shareablesJs6(){const{VALID_ARRAY_VIEWS_NAMES,typeName,buffer}=this.__closure;if(!VALID_ARRAY_VIEWS_NAMES.includes(typeName)){throw new ReanimatedError(\\\"[Reanimated] Invalid array view name `\\\"+typeName+\\\"`.\\\");}const constructor=global[typeName];if(constructor===undefined){throw new ReanimatedError(\\\"[Reanimated] Constructor for `\\\"+typeName+\\\"` not found.\\\");}return new constructor(buffer);}\"};function cloneArrayBufferView(value){var buffer=value.buffer;var typeName=value.constructor.name;var handle=makeShareableCloneRecursive({__init:function(){var shareablesJs6=function shareablesJs6(){if(!VALID_ARRAY_VIEWS_NAMES.includes(typeName)){throw new ReanimatedError(`[Reanimated] Invalid array view name \\`${typeName}\\`.`);}var constructor=global[typeName];if(constructor===undefined){throw new ReanimatedError(`[Reanimated] Constructor for \\`${typeName}\\` not found.`);}return new constructor(buffer);};shareablesJs6.__closure={VALID_ARRAY_VIEWS_NAMES:VALID_ARRAY_VIEWS_NAMES,typeName:typeName,buffer:buffer};shareablesJs6.__workletHash=11365189564964;shareablesJs6.__initData=_worklet_11365189564964_init_data;return shareablesJs6;}()});shareableMappingCache.set(value,handle);return handle;}function inaccessibleObject(value){var clone=makeShareableCloneRecursive(INACCESSIBLE_OBJECT);shareableMappingCache.set(value,clone);return clone;}var WORKLET_CODE_THRESHOLD=255;function getWorkletCode(value){var _value$__initData;var code=value==null?void 0:(_value$__initData=value.__initData)==null?void 0:_value$__initData.code;if(!code){return'unknown';}if(code.length>WORKLET_CODE_THRESHOLD){return`${code.substring(0,WORKLET_CODE_THRESHOLD)}...`;}return code;}var _worklet_8028397523874_init_data={code:\"function isRemoteFunction_shareablesJs7(value){return!!value.__remoteFunction;}\"};var isRemoteFunction=function(){var isRemoteFunction=function isRemoteFunction(value){return!!value.__remoteFunction;};isRemoteFunction.__closure={};isRemoteFunction.__workletHash=8028397523874;isRemoteFunction.__initData=_worklet_8028397523874_init_data;return isRemoteFunction;}();function freezeObjectInDev(value){if(!false){return;}Object.entries(value).forEach(function(_ref5){var _ref6=_slicedToArray(_ref5,2),key=_ref6[0],element=_ref6[1];var descriptor=Object.getOwnPropertyDescriptor(value,key);if(!descriptor.configurable){return;}Object.defineProperty(value,key,{get:function get(){return element;},set:function set(){logger.warn(`Tried to modify key \\`${key}\\` of an object which has been already passed to a worklet. See \nhttps://docs.swmansion.com/react-native-reanimated/docs/guides/troubleshooting#tried-to-modify-key-of-an-object-which-has-been-converted-to-a-shareable \nfor more details.`);}});});Object.preventExtensions(value);}var _worklet_1607325666004_init_data={code:\"function makeShareableCloneOnUIRecursive_shareablesJs8(value){const{SHOULD_BE_USE_WEB,isHostObject,isRemoteFunction}=this.__closure;if(SHOULD_BE_USE_WEB){return value;}function cloneRecursive(value){if(typeof value==='object'&&value!==null||typeof value==='function'){if(isHostObject(value)){return global._makeShareableClone(value,undefined);}if(isRemoteFunction(value)){return value.__remoteFunction;}if(Array.isArray(value)){return global._makeShareableClone(value.map(cloneRecursive),undefined);}const toAdapt={};for(const[key,element]of Object.entries(value)){toAdapt[key]=cloneRecursive(element);}return global._makeShareableClone(toAdapt,value);}return global._makeShareableClone(value,undefined);}return cloneRecursive(value);}\"};export var makeShareableCloneOnUIRecursive=function(){var makeShareableCloneOnUIRecursive=function makeShareableCloneOnUIRecursive(value){if(SHOULD_BE_USE_WEB){return value;}function cloneRecursive(value){if(typeof value==='object'&&value!==null||typeof value==='function'){if(isHostObject(value)){return global._makeShareableClone(value,undefined);}if(isRemoteFunction(value)){return value.__remoteFunction;}if(Array.isArray(value)){return global._makeShareableClone(value.map(cloneRecursive),undefined);}var toAdapt={};for(var _ref7 of Object.entries(value)){var _ref8=_slicedToArray(_ref7,2);var key=_ref8[0];var element=_ref8[1];toAdapt[key]=cloneRecursive(element);}return global._makeShareableClone(toAdapt,value);}return global._makeShareableClone(value,undefined);}return cloneRecursive(value);};makeShareableCloneOnUIRecursive.__closure={SHOULD_BE_USE_WEB:SHOULD_BE_USE_WEB,isHostObject:isHostObject,isRemoteFunction:isRemoteFunction};makeShareableCloneOnUIRecursive.__workletHash=1607325666004;makeShareableCloneOnUIRecursive.__initData=_worklet_1607325666004_init_data;return makeShareableCloneOnUIRecursive;}();function makeShareableJS(value){return value;}var _worklet_4058688871355_init_data={code:\"function shareablesJs9(){const{value}=this.__closure;return value;}\"};function makeShareableNative(value){if(shareableMappingCache.get(value)){return value;}var handle=makeShareableCloneRecursive({__init:function(){var shareablesJs9=function shareablesJs9(){return value;};shareablesJs9.__closure={value:value};shareablesJs9.__workletHash=4058688871355;shareablesJs9.__initData=_worklet_4058688871355_init_data;return shareablesJs9;}()});shareableMappingCache.set(value,handle);return value;}export var makeShareable=SHOULD_BE_USE_WEB?makeShareableJS:makeShareableNative;","map":{"version":3,"names":["_slicedToArray","isWorkletFunction","ReanimatedError","registerWorkletStackDetails","logger","jsVersion","shouldBeUseWeb","shareableMappingCache","shareableMappingFlag","WorkletsModule","SHOULD_BE_USE_WEB","MAGIC_KEY","_worklet_8151094367428_init_data","code","isHostObject","value","__closure","__workletHash","__initData","isPlainJSObject","object","Object","getPrototypeOf","prototype","getFromCache","cached","get","_worklet_7060032473743_init_data","INACCESSIBLE_OBJECT","__init","shareablesJs2","Proxy","_","prop","String","set","VALID_ARRAY_VIEWS_NAMES","DETECT_CYCLIC_OBJECT_DEPTH_THRESHOLD","processedObjectAtThresholdDepth","makeShareableCloneRecursiveWeb","makeShareableCloneRecursiveNative","shouldPersistRemote","arguments","length","undefined","depth","detectCyclicObject","isObject","isFunction","clonePrimitive","Array","isArray","cloneArray","cloneRemoteFunction","cloneHostObject","__workletContextObjectFactory","cloneContextObject","cloneWorklet","clonePlainJSObject","RegExp","cloneRegExp","Error","cloneError","ArrayBuffer","cloneArrayBuffer","isView","cloneArrayBufferView","inaccessibleObject","makeShareableCloneRecursive","makeShareableClone","clonedElements","map","element","clone","freezeObjectInDev","babelVersion","version","getWorkletCode","__stackDetails","clonedProps","_ref","entries","_ref2","key","_worklet_7789420377104_init_data","workletContextObjectFactory","handle","shareablesJs3","_ref3","_ref4","_worklet_5975792175190_init_data","pattern","source","flags","shareablesJs4","_worklet_14257546745571_init_data","name","message","stack","shareablesJs5","error","_worklet_11365189564964_init_data","buffer","typeName","constructor","shareablesJs6","includes","global","WORKLET_CODE_THRESHOLD","_value$__initData","substring","_worklet_8028397523874_init_data","isRemoteFunction","__remoteFunction","forEach","_ref5","_ref6","descriptor","getOwnPropertyDescriptor","configurable","defineProperty","warn","preventExtensions","_worklet_1607325666004_init_data","makeShareableCloneOnUIRecursive","cloneRecursive","_makeShareableClone","toAdapt","_ref7","_ref8","makeShareableJS","_worklet_4058688871355_init_data","makeShareableNative","shareablesJs9","makeShareable"],"sources":["C:\\Users\\Jorn\\Documents\\hitster\\node_modules\\react-native-reanimated\\src\\shareables.ts"],"sourcesContent":["'use strict';\nimport type {\n  FlatShareableRef,\n  ShareableRef,\n  WorkletFunction,\n  WorkletFunctionDev,\n} from './commonTypes';\nimport { isWorkletFunction } from './commonTypes';\nimport { ReanimatedError, registerWorkletStackDetails } from './errors';\nimport { logger } from './logger';\nimport { jsVersion } from './platform-specific/jsVersion';\nimport { shouldBeUseWeb } from './PlatformChecker';\nimport {\n  shareableMappingCache,\n  shareableMappingFlag,\n} from './shareableMappingCache';\nimport { WorkletsModule } from './worklets';\n\n// for web/chrome debugger/jest environments this file provides a stub implementation\n// where no shareable references are used. Instead, the objects themselves are used\n// instead of shareable references, because of the fact that we don't have to deal with\n// running the code on separate VMs.\nconst SHOULD_BE_USE_WEB = shouldBeUseWeb();\n\nconst MAGIC_KEY = 'REANIMATED_MAGIC_KEY';\n\nfunction isHostObject(value: NonNullable<object>) {\n  'worklet';\n  // We could use JSI to determine whether an object is a host object, however\n  // the below workaround works well and is way faster than an additional JSI call.\n  // We use the fact that host objects have broken implementation of `hasOwnProperty`\n  // and hence return true for all `in` checks regardless of the key we ask for.\n  return MAGIC_KEY in value;\n}\n\nfunction isPlainJSObject(object: object): object is Record<string, unknown> {\n  return Object.getPrototypeOf(object) === Object.prototype;\n}\n\nfunction getFromCache(value: object) {\n  const cached = shareableMappingCache.get(value);\n  if (cached === shareableMappingFlag) {\n    // This means that `value` was already a clone and we should return it as is.\n    return value;\n  }\n  return cached;\n}\n\n// The below object is used as a replacement for objects that cannot be transferred\n// as shareable values. In makeShareableCloneRecursive we detect if an object is of\n// a plain Object.prototype and only allow such objects to be transferred. This lets\n// us avoid all sorts of react internals from leaking into the UI runtime. To make it\n// possible to catch errors when someone actually tries to access such object on the UI\n// runtime, we use the below Proxy object which is instantiated on the UI runtime and\n// throws whenever someone tries to access its fields.\nconst INACCESSIBLE_OBJECT = {\n  __init: () => {\n    'worklet';\n    return new Proxy(\n      {},\n      {\n        get: (_: unknown, prop: string | symbol) => {\n          if (\n            prop === '_isReanimatedSharedValue' ||\n            prop === '__remoteFunction'\n          ) {\n            // not very happy about this check here, but we need to allow for\n            // \"inaccessible\" objects to be tested with isSharedValue check\n            // as it is being used in the mappers when extracting inputs recursively\n            // as well as with isRemoteFunction when cloning objects recursively.\n            // Apparently we can't check if a key exists there as HostObjects always\n            // return true for such tests, so the only possibility for us is to\n            // actually access that key and see if it is set to true. We therefore\n            // need to allow for this key to be accessed here.\n            return false;\n          }\n          throw new ReanimatedError(\n            `Trying to access property \\`${String(\n              prop\n            )}\\` of an object which cannot be sent to the UI runtime.`\n          );\n        },\n        set: () => {\n          throw new ReanimatedError(\n            'Trying to write to an object which cannot be sent to the UI runtime.'\n          );\n        },\n      }\n    );\n  },\n};\n\nconst VALID_ARRAY_VIEWS_NAMES = [\n  'Int8Array',\n  'Uint8Array',\n  'Uint8ClampedArray',\n  'Int16Array',\n  'Uint16Array',\n  'Int32Array',\n  'Uint32Array',\n  'Float32Array',\n  'Float64Array',\n  'BigInt64Array',\n  'BigUint64Array',\n  'DataView',\n];\n\nconst DETECT_CYCLIC_OBJECT_DEPTH_THRESHOLD = 30;\n// Below variable stores object that we process in makeShareableCloneRecursive at the specified depth.\n// We use it to check if later on the function reenters with the same object\nlet processedObjectAtThresholdDepth: unknown;\n\nfunction makeShareableCloneRecursiveWeb<T>(value: T): ShareableRef<T> {\n  return value as ShareableRef<T>;\n}\n\nfunction makeShareableCloneRecursiveNative<T>(\n  value: T,\n  shouldPersistRemote = false,\n  depth = 0\n): ShareableRef<T> {\n  detectCyclicObject(value, depth);\n\n  const isObject = typeof value === 'object';\n  const isFunction = typeof value === 'function';\n\n  if ((!isObject && !isFunction) || value === null) {\n    return clonePrimitive(value, shouldPersistRemote);\n  }\n\n  const cached = getFromCache(value);\n  if (cached !== undefined) {\n    return cached as ShareableRef<T>;\n  }\n\n  if (Array.isArray(value)) {\n    return cloneArray(value, shouldPersistRemote, depth);\n  }\n  if (isFunction && !isWorkletFunction(value)) {\n    return cloneRemoteFunction(value, shouldPersistRemote);\n  }\n  if (isHostObject(value)) {\n    return cloneHostObject(value, shouldPersistRemote);\n  }\n  if (isPlainJSObject(value) && value.__workletContextObjectFactory) {\n    return cloneContextObject(value);\n  }\n  if ((isPlainJSObject(value) || isFunction) && isWorkletFunction(value)) {\n    return cloneWorklet(value, shouldPersistRemote, depth);\n  }\n  if (isPlainJSObject(value) || isFunction) {\n    return clonePlainJSObject(value, shouldPersistRemote, depth);\n  }\n  if (value instanceof RegExp) {\n    return cloneRegExp(value);\n  }\n  if (value instanceof Error) {\n    return cloneError(value);\n  }\n  if (value instanceof ArrayBuffer) {\n    return cloneArrayBuffer(value, shouldPersistRemote);\n  }\n  if (ArrayBuffer.isView(value)) {\n    // typed array (e.g. Int32Array, Uint8ClampedArray) or DataView\n    return cloneArrayBufferView(value);\n  }\n  return inaccessibleObject(value);\n}\n\ninterface MakeShareableClone {\n  <T>(value: T, shouldPersistRemote?: boolean, depth?: number): ShareableRef<T>;\n}\n\nexport const makeShareableCloneRecursive: MakeShareableClone = SHOULD_BE_USE_WEB\n  ? makeShareableCloneRecursiveWeb\n  : makeShareableCloneRecursiveNative;\n\nfunction detectCyclicObject(value: unknown, depth: number) {\n  if (depth >= DETECT_CYCLIC_OBJECT_DEPTH_THRESHOLD) {\n    // if we reach certain recursion depth we suspect that we are dealing with a cyclic object.\n    // this type of objects are not supported and cannot be transferred as shareable, so we\n    // implement a simple detection mechanism that remembers the value at a given depth and\n    // tests whether we try reenter this method later on with the same value. If that happens\n    // we throw an appropriate error.\n    if (depth === DETECT_CYCLIC_OBJECT_DEPTH_THRESHOLD) {\n      processedObjectAtThresholdDepth = value;\n    } else if (value === processedObjectAtThresholdDepth) {\n      throw new ReanimatedError(\n        'Trying to convert a cyclic object to a shareable. This is not supported.'\n      );\n    }\n  } else {\n    processedObjectAtThresholdDepth = undefined;\n  }\n}\n\nfunction clonePrimitive<T>(\n  value: T,\n  shouldPersistRemote: boolean\n): ShareableRef<T> {\n  return WorkletsModule.makeShareableClone(value, shouldPersistRemote);\n}\n\nfunction cloneArray<T extends unknown[]>(\n  value: T,\n  shouldPersistRemote: boolean,\n  depth: number\n): ShareableRef<T> {\n  const clonedElements = value.map((element) =>\n    makeShareableCloneRecursive(element, shouldPersistRemote, depth + 1)\n  );\n  const clone = WorkletsModule.makeShareableClone(\n    clonedElements,\n    shouldPersistRemote,\n    value\n  ) as ShareableRef<T>;\n  shareableMappingCache.set(value, clone);\n  shareableMappingCache.set(clone);\n\n  freezeObjectInDev(value);\n  return clone;\n}\n\nfunction cloneRemoteFunction<T extends object>(\n  value: T,\n  shouldPersistRemote: boolean\n): ShareableRef<T> {\n  const clone = WorkletsModule.makeShareableClone(\n    value,\n    shouldPersistRemote,\n    value\n  );\n  shareableMappingCache.set(value, clone);\n  shareableMappingCache.set(clone);\n\n  freezeObjectInDev(value);\n  return clone;\n}\n\nfunction cloneHostObject<T extends object>(\n  value: T,\n  shouldPersistRemote: boolean\n): ShareableRef<T> {\n  // for host objects we pass the reference to the object as shareable and\n  // then recreate new host object wrapping the same instance on the UI thread.\n  // there is no point of iterating over keys as we do for regular objects.\n  const clone = WorkletsModule.makeShareableClone(\n    value,\n    shouldPersistRemote,\n    value\n  );\n  shareableMappingCache.set(value, clone);\n  shareableMappingCache.set(clone);\n\n  return clone;\n}\n\nfunction cloneWorklet<T extends WorkletFunction>(\n  value: T,\n  shouldPersistRemote: boolean,\n  depth: number\n): ShareableRef<T> {\n  if (__DEV__) {\n    const babelVersion = (value as WorkletFunctionDev).__initData.version;\n    if (babelVersion !== undefined && babelVersion !== jsVersion) {\n      throw new ReanimatedError(`[Reanimated] Mismatch between JavaScript code version and Reanimated Babel plugin version (${jsVersion} vs. ${babelVersion}).        \nSee \\`https://docs.swmansion.com/react-native-reanimated/docs/guides/troubleshooting#mismatch-between-javascript-code-version-and-reanimated-babel-plugin-version\\` for more details.\nOffending code was: \\`${getWorkletCode(value)}\\``);\n    }\n    registerWorkletStackDetails(\n      value.__workletHash,\n      (value as WorkletFunctionDev).__stackDetails!\n    );\n  }\n  if ((value as WorkletFunctionDev).__stackDetails) {\n    // `Error` type of value cannot be copied to the UI thread, so we\n    // remove it after we handled it in dev mode or delete it to ignore it in production mode.\n    // Not removing this would cause an infinite loop in production mode and it just\n    // seems more elegant to handle it this way.\n    delete (value as WorkletFunctionDev).__stackDetails;\n  }\n  // to save on transferring static __initData field of worklet structure\n  // we request shareable value to persist its UI counterpart. This means\n  // that the __initData field that contains long strings represeting the\n  // worklet code, source map, and location, will always be\n  // serialized/deserialized once.\n  const clonedProps: Record<string, unknown> = {};\n  clonedProps.__initData = makeShareableCloneRecursive(\n    value.__initData,\n    true,\n    depth + 1\n  );\n\n  for (const [key, element] of Object.entries(value)) {\n    if (key === '__initData' && clonedProps.__initData !== undefined) {\n      continue;\n    }\n    clonedProps[key] = makeShareableCloneRecursive(\n      element,\n      shouldPersistRemote,\n      depth + 1\n    );\n  }\n  const clone = WorkletsModule.makeShareableClone(\n    clonedProps,\n    // retain all worklets\n    true,\n    value\n  ) as ShareableRef<T>;\n  shareableMappingCache.set(value, clone);\n  shareableMappingCache.set(clone);\n\n  freezeObjectInDev(value);\n  return clone;\n}\n\nfunction cloneContextObject<T extends object>(value: T): ShareableRef<T> {\n  const workletContextObjectFactory = (value as Record<string, unknown>)\n    .__workletContextObjectFactory as () => T;\n  const handle = makeShareableCloneRecursive({\n    __init: () => {\n      'worklet';\n      return workletContextObjectFactory();\n    },\n  });\n  shareableMappingCache.set(value, handle);\n  return handle as ShareableRef<T>;\n}\n\nfunction clonePlainJSObject<T extends object>(\n  value: T,\n  shouldPersistRemote: boolean,\n  depth: number\n): ShareableRef<T> {\n  const clonedProps: Record<string, unknown> = {};\n  for (const [key, element] of Object.entries(value)) {\n    if (key === '__initData' && clonedProps.__initData !== undefined) {\n      continue;\n    }\n    clonedProps[key] = makeShareableCloneRecursive(\n      element,\n      shouldPersistRemote,\n      depth + 1\n    );\n  }\n  const clone = WorkletsModule.makeShareableClone(\n    clonedProps,\n    shouldPersistRemote,\n    value\n  ) as ShareableRef<T>;\n  shareableMappingCache.set(value, clone);\n  shareableMappingCache.set(clone);\n\n  freezeObjectInDev(value);\n  return clone;\n}\n\nfunction cloneRegExp<T extends RegExp>(value: T): ShareableRef<T> {\n  const pattern = value.source;\n  const flags = value.flags;\n  const handle = makeShareableCloneRecursive({\n    __init: () => {\n      'worklet';\n      return new RegExp(pattern, flags);\n    },\n  }) as unknown as ShareableRef<T>;\n  shareableMappingCache.set(value, handle);\n\n  return handle;\n}\n\nfunction cloneError<T extends Error>(value: T): ShareableRef<T> {\n  const { name, message, stack } = value;\n  const handle = makeShareableCloneRecursive({\n    __init: () => {\n      'worklet';\n      // eslint-disable-next-line reanimated/use-reanimated-error\n      const error = new Error();\n      error.name = name;\n      error.message = message;\n      error.stack = stack;\n      return error;\n    },\n  });\n  shareableMappingCache.set(value, handle);\n  return handle as unknown as ShareableRef<T>;\n}\n\nfunction cloneArrayBuffer<T extends ArrayBuffer>(\n  value: T,\n  shouldPersistRemote: boolean\n): ShareableRef<T> {\n  const clone = WorkletsModule.makeShareableClone(\n    value,\n    shouldPersistRemote,\n    value\n  );\n  shareableMappingCache.set(value, clone);\n  shareableMappingCache.set(clone);\n\n  return clone;\n}\n\nfunction cloneArrayBufferView<T extends ArrayBufferView>(\n  value: T\n): ShareableRef<T> {\n  const buffer = value.buffer;\n  const typeName = value.constructor.name;\n  const handle = makeShareableCloneRecursive({\n    __init: () => {\n      'worklet';\n      if (!VALID_ARRAY_VIEWS_NAMES.includes(typeName)) {\n        throw new ReanimatedError(\n          `[Reanimated] Invalid array view name \\`${typeName}\\`.`\n        );\n      }\n      const constructor = global[typeName as keyof typeof global];\n      if (constructor === undefined) {\n        throw new ReanimatedError(\n          `[Reanimated] Constructor for \\`${typeName}\\` not found.`\n        );\n      }\n      return new constructor(buffer);\n    },\n  }) as unknown as ShareableRef<T>;\n  shareableMappingCache.set(value, handle);\n\n  return handle;\n}\n\nfunction inaccessibleObject<T extends object>(value: T): ShareableRef<T> {\n  // This is reached for object types that are not of plain Object.prototype.\n  // We don't support such objects from being transferred as shareables to\n  // the UI runtime and hence we replace them with \"inaccessible object\"\n  // which is implemented as a Proxy object that throws on any attempt\n  // of accessing its fields. We argue that such objects can sometimes leak\n  // as attributes of objects being captured by worklets but should never\n  // be used on the UI runtime regardless. If they are being accessed, the user\n  // will get an appropriate error message.\n  const clone = makeShareableCloneRecursive<T>(INACCESSIBLE_OBJECT as T);\n  shareableMappingCache.set(value, clone);\n  return clone;\n}\n\nconst WORKLET_CODE_THRESHOLD = 255;\n\nfunction getWorkletCode(value: WorkletFunction) {\n  const code = value?.__initData?.code;\n  if (!code) {\n    return 'unknown';\n  }\n  if (code.length > WORKLET_CODE_THRESHOLD) {\n    return `${code.substring(0, WORKLET_CODE_THRESHOLD)}...`;\n  }\n  return code;\n}\n\ntype RemoteFunction<T> = {\n  __remoteFunction: FlatShareableRef<T>;\n};\n\nfunction isRemoteFunction<T>(value: {\n  __remoteFunction?: unknown;\n}): value is RemoteFunction<T> {\n  'worklet';\n  return !!value.__remoteFunction;\n}\n\n/**\n * We freeze\n *\n * - Arrays,\n * - Remote functions,\n * - Plain JS objects,\n *\n * That are transformed to a shareable with a meaningful warning. This should\n * help detect issues when someone modifies data after it's been converted.\n * Meaning that they may be doing a faulty assumption in their code expecting\n * that the updates are going to automatically propagate to the object sent to\n * the UI thread. If the user really wants some objects to be mutable they\n * should use shared values instead.\n */\nfunction freezeObjectInDev<T extends object>(value: T) {\n  if (!__DEV__) {\n    return;\n  }\n  Object.entries(value).forEach(([key, element]) => {\n    const descriptor = Object.getOwnPropertyDescriptor(value, key)!;\n    if (!descriptor.configurable) {\n      return;\n    }\n    Object.defineProperty(value, key, {\n      get() {\n        return element;\n      },\n      set() {\n        logger.warn(\n          `Tried to modify key \\`${key}\\` of an object which has been already passed to a worklet. See \nhttps://docs.swmansion.com/react-native-reanimated/docs/guides/troubleshooting#tried-to-modify-key-of-an-object-which-has-been-converted-to-a-shareable \nfor more details.`\n        );\n      },\n    });\n  });\n  Object.preventExtensions(value);\n}\n\nexport function makeShareableCloneOnUIRecursive<T>(\n  value: T\n): FlatShareableRef<T> {\n  'worklet';\n  if (SHOULD_BE_USE_WEB) {\n    // @ts-ignore web is an interesting place where we don't run a secondary VM on the UI thread\n    // see more details in the comment where USE_STUB_IMPLEMENTATION is defined.\n    return value;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  function cloneRecursive(value: T): FlatShareableRef<T> {\n    if (\n      (typeof value === 'object' && value !== null) ||\n      typeof value === 'function'\n    ) {\n      if (isHostObject(value)) {\n        // We call `_makeShareableClone` to wrap the provided HostObject\n        // inside ShareableJSRef.\n        return global._makeShareableClone(\n          value,\n          undefined\n        ) as FlatShareableRef<T>;\n      }\n      if (isRemoteFunction<T>(value)) {\n        // RemoteFunctions are created by us therefore they are\n        // a Shareable out of the box and there is no need to\n        // call `_makeShareableClone`.\n        return value.__remoteFunction;\n      }\n      if (Array.isArray(value)) {\n        return global._makeShareableClone(\n          value.map(cloneRecursive),\n          undefined\n        ) as FlatShareableRef<T>;\n      }\n      const toAdapt: Record<string, FlatShareableRef<T>> = {};\n      for (const [key, element] of Object.entries(value)) {\n        toAdapt[key] = cloneRecursive(element);\n      }\n      return global._makeShareableClone(toAdapt, value) as FlatShareableRef<T>;\n    }\n    return global._makeShareableClone(value, undefined);\n  }\n  return cloneRecursive(value);\n}\n\nfunction makeShareableJS<T extends object>(value: T): T {\n  return value;\n}\n\nfunction makeShareableNative<T extends object>(value: T): T {\n  if (shareableMappingCache.get(value)) {\n    return value;\n  }\n  const handle = makeShareableCloneRecursive({\n    __init: () => {\n      'worklet';\n      return value;\n    },\n  });\n  shareableMappingCache.set(value, handle);\n  return value;\n}\n\n/**\n * This function creates a value on UI with persistent state - changes to it on\n * the UI thread will be seen by all worklets. Use it when you want to create a\n * value that is read and written only on the UI thread.\n */\nexport const makeShareable = SHOULD_BE_USE_WEB\n  ? makeShareableJS\n  : makeShareableNative;\n"],"mappings":"AAAA,YAAY,QAAAA,cAAA,4CAOZ,OAASC,iBAAiB,KAAQ,kBAAe,CACjD,OAASC,eAAe,CAAEC,2BAA2B,KAAQ,aAAU,CACvE,OAASC,MAAM,KAAQ,mBAAU,CACjC,OAASC,SAAS,KAAQ,kCAA+B,CACzD,OAASC,cAAc,KAAQ,sBAAmB,CAClD,OACEC,qBAAqB,CACrBC,oBAAoB,KACf,4BAAyB,CAChC,OAASC,cAAc,KAAQ,qBAAY,CAM3C,GAAM,CAAAC,iBAAiB,CAAGJ,cAAc,CAAC,CAAC,CAE1C,GAAM,CAAAK,SAAS,CAAG,sBAAsB,KAAAC,gCAAA,EAAAC,IAAA,+GAAAC,YAAA,CAExC,eAAAA,YAAA,UAAAA,aAAsBC,KAA0B,CAAE,CAMhD,MAAO,CAAAJ,SAAS,GAAI,CAAAI,KAAK,CAC3B,EAAAD,YAAA,CAAAE,SAAA,EAAAL,SAAA,CADSA,SAAS,EAAAG,YAAA,CAAAG,aAAA,eAAAH,YAAA,CAAAI,UAAA,CAAAN,gCAAA,QAAAE,YAAA,EANlB,GASA,QAAS,CAAAK,eAAeA,CAACC,MAAc,CAAqC,CAC1E,MAAO,CAAAC,MAAM,CAACC,cAAc,CAACF,MAAM,CAAC,GAAKC,MAAM,CAACE,SAAS,CAC3D,CAEA,QAAS,CAAAC,YAAYA,CAACT,KAAa,CAAE,CACnC,GAAM,CAAAU,MAAM,CAAGlB,qBAAqB,CAACmB,GAAG,CAACX,KAAK,CAAC,CAC/C,GAAIU,MAAM,GAAKjB,oBAAoB,CAAE,CAEnC,MAAO,CAAAO,KAAK,CACd,CACA,MAAO,CAAAU,MAAM,CACf,KAAAE,gCAAA,EAAAd,IAAA,kZASA,GAAM,CAAAe,mBAAmB,CAAG,CAC1BC,MAAM,CAAE,eAAAC,aAAA,UAAAA,cAAA,CAAM,CAEZ,MAAO,IAAI,CAAAC,KAAK,CACd,CAAC,CAAC,CACF,CACEL,GAAG,CAAE,QAAL,CAAAA,GAAGA,CAAGM,CAAU,CAAEC,IAAqB,CAAK,CAC1C,GACEA,IAAI,GAAK,0BAA0B,EACnCA,IAAI,GAAK,kBAAkB,CAC3B,CASA,MAAO,MAAK,CACd,CACA,KAAM,IAAI,CAAA/B,eAAe,CACvB,+BAA+BgC,MAAM,CACnCD,IACF,CAAC,yDACH,CAAC,CACH,CAAC,CACDE,GAAG,CAAE,QAAL,CAAAA,GAAGA,CAAA,CAAQ,CACT,KAAM,IAAI,CAAAjC,eAAe,CACvB,sEACF,CAAC,CACH,CACF,CACF,CAAC,CACH,EAAA4B,aAAA,CAAAd,SAAA,IAAAc,aAAA,CAAAb,aAAA,eAAAa,aAAA,CAAAZ,UAAA,CAAAS,gCAAA,QAAAG,aAAA,EAjCQ,EAkCV,CAAC,CAED,GAAM,CAAAM,uBAAuB,CAAG,CAC9B,WAAW,CACX,YAAY,CACZ,mBAAmB,CACnB,YAAY,CACZ,aAAa,CACb,YAAY,CACZ,aAAa,CACb,cAAc,CACd,cAAc,CACd,eAAe,CACf,gBAAgB,CAChB,UAAU,CACX,CAED,GAAM,CAAAC,oCAAoC,CAAG,EAAE,CAG/C,GAAI,CAAAC,+BAAwC,CAE5C,QAAS,CAAAC,8BAA8BA,CAAIxB,KAAQ,CAAmB,CACpE,MAAO,CAAAA,KAAK,CACd,CAEA,QAAS,CAAAyB,iCAAiCA,CACxCzB,KAAQ,CAGS,IAFjB,CAAA0B,mBAAmB,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,IAC3B,CAAAG,KAAK,CAAAH,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAETI,kBAAkB,CAAC/B,KAAK,CAAE8B,KAAK,CAAC,CAEhC,GAAM,CAAAE,QAAQ,CAAG,MAAO,CAAAhC,KAAK,GAAK,QAAQ,CAC1C,GAAM,CAAAiC,UAAU,CAAG,MAAO,CAAAjC,KAAK,GAAK,UAAU,CAE9C,GAAK,CAACgC,QAAQ,EAAI,CAACC,UAAU,EAAKjC,KAAK,GAAK,IAAI,CAAE,CAChD,MAAO,CAAAkC,cAAc,CAAClC,KAAK,CAAE0B,mBAAmB,CAAC,CACnD,CAEA,GAAM,CAAAhB,MAAM,CAAGD,YAAY,CAACT,KAAK,CAAC,CAClC,GAAIU,MAAM,GAAKmB,SAAS,CAAE,CACxB,MAAO,CAAAnB,MAAM,CACf,CAEA,GAAIyB,KAAK,CAACC,OAAO,CAACpC,KAAK,CAAC,CAAE,CACxB,MAAO,CAAAqC,UAAU,CAACrC,KAAK,CAAE0B,mBAAmB,CAAEI,KAAK,CAAC,CACtD,CACA,GAAIG,UAAU,EAAI,CAAC/C,iBAAiB,CAACc,KAAK,CAAC,CAAE,CAC3C,MAAO,CAAAsC,mBAAmB,CAACtC,KAAK,CAAE0B,mBAAmB,CAAC,CACxD,CACA,GAAI3B,YAAY,CAACC,KAAK,CAAC,CAAE,CACvB,MAAO,CAAAuC,eAAe,CAACvC,KAAK,CAAE0B,mBAAmB,CAAC,CACpD,CACA,GAAItB,eAAe,CAACJ,KAAK,CAAC,EAAIA,KAAK,CAACwC,6BAA6B,CAAE,CACjE,MAAO,CAAAC,kBAAkB,CAACzC,KAAK,CAAC,CAClC,CACA,GAAI,CAACI,eAAe,CAACJ,KAAK,CAAC,EAAIiC,UAAU,GAAK/C,iBAAiB,CAACc,KAAK,CAAC,CAAE,CACtE,MAAO,CAAA0C,YAAY,CAAC1C,KAAK,CAAE0B,mBAAmB,CAAEI,KAAK,CAAC,CACxD,CACA,GAAI1B,eAAe,CAACJ,KAAK,CAAC,EAAIiC,UAAU,CAAE,CACxC,MAAO,CAAAU,kBAAkB,CAAC3C,KAAK,CAAE0B,mBAAmB,CAAEI,KAAK,CAAC,CAC9D,CACA,GAAI9B,KAAK,WAAY,CAAA4C,MAAM,CAAE,CAC3B,MAAO,CAAAC,WAAW,CAAC7C,KAAK,CAAC,CAC3B,CACA,GAAIA,KAAK,WAAY,CAAA8C,KAAK,CAAE,CAC1B,MAAO,CAAAC,UAAU,CAAC/C,KAAK,CAAC,CAC1B,CACA,GAAIA,KAAK,WAAY,CAAAgD,WAAW,CAAE,CAChC,MAAO,CAAAC,gBAAgB,CAACjD,KAAK,CAAE0B,mBAAmB,CAAC,CACrD,CACA,GAAIsB,WAAW,CAACE,MAAM,CAAClD,KAAK,CAAC,CAAE,CAE7B,MAAO,CAAAmD,oBAAoB,CAACnD,KAAK,CAAC,CACpC,CACA,MAAO,CAAAoD,kBAAkB,CAACpD,KAAK,CAAC,CAClC,CAMA,MAAO,IAAM,CAAAqD,2BAA+C,CAAG1D,iBAAiB,CAC5E6B,8BAA8B,CAC9BC,iCAAiC,CAErC,QAAS,CAAAM,kBAAkBA,CAAC/B,KAAc,CAAE8B,KAAa,CAAE,CACzD,GAAIA,KAAK,EAAIR,oCAAoC,CAAE,CAMjD,GAAIQ,KAAK,GAAKR,oCAAoC,CAAE,CAClDC,+BAA+B,CAAGvB,KAAK,CACzC,CAAC,IAAM,IAAIA,KAAK,GAAKuB,+BAA+B,CAAE,CACpD,KAAM,IAAI,CAAApC,eAAe,CACvB,0EACF,CAAC,CACH,CACF,CAAC,IAAM,CACLoC,+BAA+B,CAAGM,SAAS,CAC7C,CACF,CAEA,QAAS,CAAAK,cAAcA,CACrBlC,KAAQ,CACR0B,mBAA4B,CACX,CACjB,MAAO,CAAAhC,cAAc,CAAC4D,kBAAkB,CAACtD,KAAK,CAAE0B,mBAAmB,CAAC,CACtE,CAEA,QAAS,CAAAW,UAAUA,CACjBrC,KAAQ,CACR0B,mBAA4B,CAC5BI,KAAa,CACI,CACjB,GAAM,CAAAyB,cAAc,CAAGvD,KAAK,CAACwD,GAAG,CAAE,SAAAC,OAAO,QACvC,CAAAJ,2BAA2B,CAACI,OAAO,CAAE/B,mBAAmB,CAAEI,KAAK,CAAG,CAAC,CACrE,GAAC,CACD,GAAM,CAAA4B,KAAK,CAAGhE,cAAc,CAAC4D,kBAAkB,CAC7CC,cAAc,CACd7B,mBAAmB,CACnB1B,KACF,CAAoB,CACpBR,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAE0D,KAAK,CAAC,CACvClE,qBAAqB,CAAC4B,GAAG,CAACsC,KAAK,CAAC,CAEhCC,iBAAiB,CAAC3D,KAAK,CAAC,CACxB,MAAO,CAAA0D,KAAK,CACd,CAEA,QAAS,CAAApB,mBAAmBA,CAC1BtC,KAAQ,CACR0B,mBAA4B,CACX,CACjB,GAAM,CAAAgC,KAAK,CAAGhE,cAAc,CAAC4D,kBAAkB,CAC7CtD,KAAK,CACL0B,mBAAmB,CACnB1B,KACF,CAAC,CACDR,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAE0D,KAAK,CAAC,CACvClE,qBAAqB,CAAC4B,GAAG,CAACsC,KAAK,CAAC,CAEhCC,iBAAiB,CAAC3D,KAAK,CAAC,CACxB,MAAO,CAAA0D,KAAK,CACd,CAEA,QAAS,CAAAnB,eAAeA,CACtBvC,KAAQ,CACR0B,mBAA4B,CACX,CAIjB,GAAM,CAAAgC,KAAK,CAAGhE,cAAc,CAAC4D,kBAAkB,CAC7CtD,KAAK,CACL0B,mBAAmB,CACnB1B,KACF,CAAC,CACDR,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAE0D,KAAK,CAAC,CACvClE,qBAAqB,CAAC4B,GAAG,CAACsC,KAAK,CAAC,CAEhC,MAAO,CAAAA,KAAK,CACd,CAEA,QAAS,CAAAhB,YAAYA,CACnB1C,KAAQ,CACR0B,mBAA4B,CAC5BI,KAAa,CACI,CACjB,SAAa,CACX,GAAM,CAAA8B,YAAY,CAAI5D,KAAK,CAAwBG,UAAU,CAAC0D,OAAO,CACrE,GAAID,YAAY,GAAK/B,SAAS,EAAI+B,YAAY,GAAKtE,SAAS,CAAE,CAC5D,KAAM,IAAI,CAAAH,eAAe,CAAC,8FAA8FG,SAAS,QAAQsE,YAAY;AAC3J;AACA,wBAAwBE,cAAc,CAAC9D,KAAK,CAAC,IAAI,CAAC,CAC9C,CACAZ,2BAA2B,CACzBY,KAAK,CAACE,aAAa,CAClBF,KAAK,CAAwB+D,cAChC,CAAC,CACH,CACA,GAAK/D,KAAK,CAAwB+D,cAAc,CAAE,CAKhD,MAAQ,CAAA/D,KAAK,CAAwB+D,cAAc,CACrD,CAMA,GAAM,CAAAC,WAAoC,CAAG,CAAC,CAAC,CAC/CA,WAAW,CAAC7D,UAAU,CAAGkD,2BAA2B,CAClDrD,KAAK,CAACG,UAAU,CAChB,IAAI,CACJ2B,KAAK,CAAG,CACV,CAAC,CAED,QAAAmC,IAAA,GAA6B,CAAA3D,MAAM,CAAC4D,OAAO,CAAClE,KAAK,CAAC,CAAE,KAAAmE,KAAA,CAAAlF,cAAA,CAAAgF,IAAA,OAAxC,CAAAG,GAAG,CAAAD,KAAA,OAAE,CAAAV,OAAO,CAAAU,KAAA,IACtB,GAAIC,GAAG,GAAK,YAAY,EAAIJ,WAAW,CAAC7D,UAAU,GAAK0B,SAAS,CAAE,CAChE,SACF,CACAmC,WAAW,CAACI,GAAG,CAAC,CAAGf,2BAA2B,CAC5CI,OAAO,CACP/B,mBAAmB,CACnBI,KAAK,CAAG,CACV,CAAC,CACH,CACA,GAAM,CAAA4B,KAAK,CAAGhE,cAAc,CAAC4D,kBAAkB,CAC7CU,WAAW,CAEX,IAAI,CACJhE,KACF,CAAoB,CACpBR,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAE0D,KAAK,CAAC,CACvClE,qBAAqB,CAAC4B,GAAG,CAACsC,KAAK,CAAC,CAEhCC,iBAAiB,CAAC3D,KAAK,CAAC,CACxB,MAAO,CAAA0D,KAAK,CACd,KAAAW,gCAAA,EAAAvE,IAAA,sHAEA,QAAS,CAAA2C,kBAAkBA,CAAmBzC,KAAQ,CAAmB,CACvE,GAAM,CAAAsE,2BAA2B,CAAItE,KAAK,CACvCwC,6BAAwC,CAC3C,GAAM,CAAA+B,MAAM,CAAGlB,2BAA2B,CAAC,CACzCvC,MAAM,CAAE,eAAA0D,aAAA,UAAAA,cAAA,CAAM,CAEZ,MAAO,CAAAF,2BAA2B,CAAC,CAAC,CACtC,EAAAE,aAAA,CAAAvE,SAAA,EAAAqE,2BAAA,CADSA,2BAA2B,EAAAE,aAAA,CAAAtE,aAAA,eAAAsE,aAAA,CAAArE,UAAA,CAAAkE,gCAAA,QAAAG,aAAA,EAF5B,EAIV,CAAC,CAAC,CACFhF,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAEuE,MAAM,CAAC,CACxC,MAAO,CAAAA,MAAM,CACf,CAEA,QAAS,CAAA5B,kBAAkBA,CACzB3C,KAAQ,CACR0B,mBAA4B,CAC5BI,KAAa,CACI,CACjB,GAAM,CAAAkC,WAAoC,CAAG,CAAC,CAAC,CAC/C,QAAAS,KAAA,GAA6B,CAAAnE,MAAM,CAAC4D,OAAO,CAAClE,KAAK,CAAC,CAAE,KAAA0E,KAAA,CAAAzF,cAAA,CAAAwF,KAAA,OAAxC,CAAAL,GAAG,CAAAM,KAAA,OAAE,CAAAjB,OAAO,CAAAiB,KAAA,IACtB,GAAIN,GAAG,GAAK,YAAY,EAAIJ,WAAW,CAAC7D,UAAU,GAAK0B,SAAS,CAAE,CAChE,SACF,CACAmC,WAAW,CAACI,GAAG,CAAC,CAAGf,2BAA2B,CAC5CI,OAAO,CACP/B,mBAAmB,CACnBI,KAAK,CAAG,CACV,CAAC,CACH,CACA,GAAM,CAAA4B,KAAK,CAAGhE,cAAc,CAAC4D,kBAAkB,CAC7CU,WAAW,CACXtC,mBAAmB,CACnB1B,KACF,CAAoB,CACpBR,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAE0D,KAAK,CAAC,CACvClE,qBAAqB,CAAC4B,GAAG,CAACsC,KAAK,CAAC,CAEhCC,iBAAiB,CAAC3D,KAAK,CAAC,CACxB,MAAO,CAAA0D,KAAK,CACd,KAAAiB,gCAAA,EAAA7E,IAAA,oGAEA,QAAS,CAAA+C,WAAWA,CAAmB7C,KAAQ,CAAmB,CAChE,GAAM,CAAA4E,OAAO,CAAG5E,KAAK,CAAC6E,MAAM,CAC5B,GAAM,CAAAC,KAAK,CAAG9E,KAAK,CAAC8E,KAAK,CACzB,GAAM,CAAAP,MAAM,CAAGlB,2BAA2B,CAAC,CACzCvC,MAAM,CAAE,eAAAiE,aAAA,UAAAA,cAAA,CAAM,CAEZ,MAAO,IAAI,CAAAnC,MAAM,CAACgC,OAAO,CAAEE,KAAK,CAAC,CACnC,EAAAC,aAAA,CAAA9E,SAAA,EAAA2E,OAAA,CADoBA,OAAO,CAAAE,KAAA,CAAEA,KAAK,EAAAC,aAAA,CAAA7E,aAAA,eAAA6E,aAAA,CAAA5E,UAAA,CAAAwE,gCAAA,QAAAI,aAAA,EAF1B,EAIV,CAAC,CAA+B,CAChCvF,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAEuE,MAAM,CAAC,CAExC,MAAO,CAAAA,MAAM,CACf,KAAAS,iCAAA,EAAAlF,IAAA,qKAEA,QAAS,CAAAiD,UAAUA,CAAkB/C,KAAQ,CAAmB,CAC9D,GAAQ,CAAAiF,IAAI,CAAqBjF,KAAK,CAA9BiF,IAAI,CAAEC,OAAO,CAAYlF,KAAK,CAAxBkF,OAAO,CAAEC,KAAA,CAAUnF,KAAK,CAAfmF,KAAA,CACvB,GAAM,CAAAZ,MAAM,CAAGlB,2BAA2B,CAAC,CACzCvC,MAAM,CAAE,eAAAsE,aAAA,UAAAA,cAAA,CAAM,CAGZ,GAAM,CAAAC,KAAK,CAAG,GAAI,CAAAvC,KAAK,CAAC,CAAC,CACzBuC,KAAK,CAACJ,IAAI,CAAGA,IAAI,CACjBI,KAAK,CAACH,OAAO,CAAGA,OAAO,CACvBG,KAAK,CAACF,KAAK,CAAGA,KAAK,CACnB,MAAO,CAAAE,KAAK,CACd,EAAAD,aAAA,CAAAnF,SAAA,EAAAgF,IAAA,CAJeA,IAAI,CAAAC,OAAA,CACDA,OAAO,CAAAC,KAAA,CACTA,KAAK,EAAAC,aAAA,CAAAlF,aAAA,gBAAAkF,aAAA,CAAAjF,UAAA,CAAA6E,iCAAA,QAAAI,aAAA,EANb,EASV,CAAC,CAAC,CACF5F,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAEuE,MAAM,CAAC,CACxC,MAAO,CAAAA,MAAM,CACf,CAEA,QAAS,CAAAtB,gBAAgBA,CACvBjD,KAAQ,CACR0B,mBAA4B,CACX,CACjB,GAAM,CAAAgC,KAAK,CAAGhE,cAAc,CAAC4D,kBAAkB,CAC7CtD,KAAK,CACL0B,mBAAmB,CACnB1B,KACF,CAAC,CACDR,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAE0D,KAAK,CAAC,CACvClE,qBAAqB,CAAC4B,GAAG,CAACsC,KAAK,CAAC,CAEhC,MAAO,CAAAA,KAAK,CACd,KAAA4B,iCAAA,EAAAxF,IAAA,2ZAEA,QAAS,CAAAqD,oBAAoBA,CAC3BnD,KAAQ,CACS,CACjB,GAAM,CAAAuF,MAAM,CAAGvF,KAAK,CAACuF,MAAM,CAC3B,GAAM,CAAAC,QAAQ,CAAGxF,KAAK,CAACyF,WAAW,CAACR,IAAI,CACvC,GAAM,CAAAV,MAAM,CAAGlB,2BAA2B,CAAC,CACzCvC,MAAM,CAAE,eAAA4E,aAAA,UAAAA,cAAA,CAAM,CAEZ,GAAI,CAACrE,uBAAuB,CAACsE,QAAQ,CAACH,QAAQ,CAAC,CAAE,CAC/C,KAAM,IAAI,CAAArG,eAAe,CACvB,0CAA0CqG,QAAQ,KACpD,CAAC,CACH,CACA,GAAM,CAAAC,WAAW,CAAGG,MAAM,CAACJ,QAAQ,CAAwB,CAC3D,GAAIC,WAAW,GAAK5D,SAAS,CAAE,CAC7B,KAAM,IAAI,CAAA1C,eAAe,CACvB,kCAAkCqG,QAAQ,eAC5C,CAAC,CACH,CACA,MAAO,IAAI,CAAAC,WAAW,CAACF,MAAM,CAAC,CAChC,EAAAG,aAAA,CAAAzF,SAAA,EAAAoB,uBAAA,CAZOA,uBAAuB,CAAAmE,QAAA,CAAUA,QAAQ,CAAAD,MAAA,CAWvBA,MAAM,EAAAG,aAAA,CAAAxF,aAAA,gBAAAwF,aAAA,CAAAvF,UAAA,CAAAmF,iCAAA,QAAAI,aAAA,EAbvB,EAeV,CAAC,CAA+B,CAChClG,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAEuE,MAAM,CAAC,CAExC,MAAO,CAAAA,MAAM,CACf,CAEA,QAAS,CAAAnB,kBAAkBA,CAAmBpD,KAAQ,CAAmB,CASvE,GAAM,CAAA0D,KAAK,CAAGL,2BAA2B,CAAIxC,mBAAwB,CAAC,CACtErB,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAE0D,KAAK,CAAC,CACvC,MAAO,CAAAA,KAAK,CACd,CAEA,GAAM,CAAAmC,sBAAsB,CAAG,GAAG,CAElC,QAAS,CAAA/B,cAAcA,CAAC9D,KAAsB,CAAE,KAAA8F,iBAAA,CAC9C,GAAM,CAAAhG,IAAI,CAAGE,KAAK,eAAA8F,iBAAA,CAAL9F,KAAK,CAAEG,UAAU,eAAjB2F,iBAAA,CAAmBhG,IAAI,CACpC,GAAI,CAACA,IAAI,CAAE,CACT,MAAO,SAAS,CAClB,CACA,GAAIA,IAAI,CAAC8B,MAAM,CAAGiE,sBAAsB,CAAE,CACxC,MAAO,GAAG/F,IAAI,CAACiG,SAAS,CAAC,CAAC,CAAEF,sBAAsB,CAAC,KAAK,CAC1D,CACA,MAAO,CAAA/F,IAAI,CACb,KAAAkG,gCAAA,EAAAlG,IAAA,wFAAAmG,gBAAA,CAMA,eAAAA,gBAAA,UAAAA,iBAA6BjG,KAE5B,CAA8B,CAE7B,MAAO,CAAC,CAACA,KAAK,CAACkG,gBAAgB,CACjC,EAAAD,gBAAA,CAAAhG,SAAA,IAAAgG,gBAAA,CAAA/F,aAAA,eAAA+F,gBAAA,CAAA9F,UAAA,CAAA6F,gCAAA,QAAAC,gBAAA,EALA,GAqBA,QAAS,CAAAtC,iBAAiBA,CAAmB3D,KAAQ,CAAE,CACrD,GAAI,MAAQ,CAAE,CACZ,OACF,CACAM,MAAM,CAAC4D,OAAO,CAAClE,KAAK,CAAC,CAACmG,OAAO,CAAC,SAAAC,KAAA,CAAoB,KAAAC,KAAA,CAAApH,cAAA,CAAAmH,KAAA,IAAlBhC,GAAG,CAAAiC,KAAA,IAAE5C,OAAO,CAAA4C,KAAA,IAC1C,GAAM,CAAAC,UAAU,CAAGhG,MAAM,CAACiG,wBAAwB,CAACvG,KAAK,CAAEoE,GAAG,CAAE,CAC/D,GAAI,CAACkC,UAAU,CAACE,YAAY,CAAE,CAC5B,OACF,CACAlG,MAAM,CAACmG,cAAc,CAACzG,KAAK,CAAEoE,GAAG,CAAE,CAChCzD,GAAG,SAAH,CAAAA,GAAGA,CAAA,CAAG,CACJ,MAAO,CAAA8C,OAAO,CAChB,CAAC,CACDrC,GAAG,SAAH,CAAAA,GAAGA,CAAA,CAAG,CACJ/B,MAAM,CAACqH,IAAI,CACT,yBAAyBtC,GAAG;AACtC;AACA,kBACQ,CAAC,CACH,CACF,CAAC,CAAC,CACJ,CAAC,CAAC,CACF9D,MAAM,CAACqG,iBAAiB,CAAC3G,KAAK,CAAC,CACjC,KAAA4G,gCAAA,EAAA9G,IAAA,ouBAEA,WAAA+G,+BAAA,CAAO,eAAAA,+BAAA,UAAAA,gCACL7G,KAAQ,CACa,CAErB,GAAIL,iBAAiB,CAAE,CAGrB,MAAO,CAAAK,KAAK,CACd,CAEA,QAAS,CAAA8G,cAAcA,CAAC9G,KAAQ,CAAuB,CACrD,GACG,MAAO,CAAAA,KAAK,GAAK,QAAQ,EAAIA,KAAK,GAAK,IAAI,EAC5C,MAAO,CAAAA,KAAK,GAAK,UAAU,CAC3B,CACA,GAAID,YAAY,CAACC,KAAK,CAAC,CAAE,CAGvB,MAAO,CAAA4F,MAAM,CAACmB,mBAAmB,CAC/B/G,KAAK,CACL6B,SACF,CAAC,CACH,CACA,GAAIoE,gBAAgB,CAAIjG,KAAK,CAAC,CAAE,CAI9B,MAAO,CAAAA,KAAK,CAACkG,gBAAgB,CAC/B,CACA,GAAI/D,KAAK,CAACC,OAAO,CAACpC,KAAK,CAAC,CAAE,CACxB,MAAO,CAAA4F,MAAM,CAACmB,mBAAmB,CAC/B/G,KAAK,CAACwD,GAAG,CAACsD,cAAc,CAAC,CACzBjF,SACF,CAAC,CACH,CACA,GAAM,CAAAmF,OAA4C,CAAG,CAAC,CAAC,CACvD,QAAAC,KAAA,GAA6B,CAAA3G,MAAM,CAAC4D,OAAO,CAAClE,KAAK,CAAC,CAAE,KAAAkH,KAAA,CAAAjI,cAAA,CAAAgI,KAAA,OAAxC,CAAA7C,GAAG,CAAA8C,KAAA,OAAE,CAAAzD,OAAO,CAAAyD,KAAA,IACtBF,OAAO,CAAC5C,GAAG,CAAC,CAAG0C,cAAc,CAACrD,OAAO,CAAC,CACxC,CACA,MAAO,CAAAmC,MAAM,CAACmB,mBAAmB,CAACC,OAAO,CAAEhH,KAAK,CAAC,CACnD,CACA,MAAO,CAAA4F,MAAM,CAACmB,mBAAmB,CAAC/G,KAAK,CAAE6B,SAAS,CAAC,CACrD,CACA,MAAO,CAAAiF,cAAc,CAAC9G,KAAK,CAAC,CAC9B,EAAA6G,+BAAA,CAAA5G,SAAA,EAAAN,iBAAA,CAxCMA,iBAAiB,CAAAI,YAAA,CAWbA,YAAY,CAAAkG,gBAAA,CAQZA,gBAAgB,EAAAY,+BAAA,CAAA3G,aAAA,eAAA2G,+BAAA,CAAA1G,UAAA,CAAAyG,gCAAA,QAAAC,+BAAA,EAvBnB,GA8CP,QAAS,CAAAM,eAAeA,CAAmBnH,KAAQ,CAAK,CACtD,MAAO,CAAAA,KAAK,CACd,KAAAoH,gCAAA,EAAAtH,IAAA,wEAEA,QAAS,CAAAuH,mBAAmBA,CAAmBrH,KAAQ,CAAK,CAC1D,GAAIR,qBAAqB,CAACmB,GAAG,CAACX,KAAK,CAAC,CAAE,CACpC,MAAO,CAAAA,KAAK,CACd,CACA,GAAM,CAAAuE,MAAM,CAAGlB,2BAA2B,CAAC,CACzCvC,MAAM,CAAE,eAAAwG,aAAA,UAAAA,cAAA,CAAM,CAEZ,MAAO,CAAAtH,KAAK,CACd,EAAAsH,aAAA,CAAArH,SAAA,EAAAD,KAAA,CADSA,KAAK,EAAAsH,aAAA,CAAApH,aAAA,eAAAoH,aAAA,CAAAnH,UAAA,CAAAiH,gCAAA,QAAAE,aAAA,EAFN,EAIV,CAAC,CAAC,CACF9H,qBAAqB,CAAC4B,GAAG,CAACpB,KAAK,CAAEuE,MAAM,CAAC,CACxC,MAAO,CAAAvE,KAAK,CACd,CAOA,MAAO,IAAM,CAAAuH,aAAa,CAAG5H,iBAAiB,CAC1CwH,eAAe,CACfE,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}