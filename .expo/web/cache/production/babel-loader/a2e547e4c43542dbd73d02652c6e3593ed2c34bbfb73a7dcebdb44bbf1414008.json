{"ast":null,"code":"'use strict';import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{AnimationsData}from\"../config.js\";var ExitingFinalStep=49;var EnteringStartStep=50;function addTransformToKeepPosition(keyframeStyleData,animationStyle,transformData,isExiting){for(var _ref of Object.entries(animationStyle)){var _ref2=_slicedToArray(_ref,2);var timestamp=_ref2[0];var styles=_ref2[1];if(styles.transform!==undefined){styles.transform.unshift(transformData);}else{styles.transform=[transformData];}var newTimestamp=parseInt(timestamp)/2;var index=isExiting?Math.min(newTimestamp,ExitingFinalStep):newTimestamp+EnteringStartStep;keyframeStyleData[`${index}`]=styles;}}function hideComponentBetweenAnimations(keyframeStyleData){var opacityInStep=new Map();if(keyframeStyleData[0].opacity===undefined){opacityInStep.set(48,1);opacityInStep.set(49,0);}if(keyframeStyleData[50].opacity===undefined){opacityInStep.set(50,0);opacityInStep.set(51,1);}for(var _ref3 of opacityInStep){var _ref4=_slicedToArray(_ref3,2);var step=_ref4[0];var opacity=_ref4[1];keyframeStyleData[step]=_objectSpread(_objectSpread({},keyframeStyleData[step]),{},{opacity:opacity});}}export function EntryExitTransition(name,transitionData){var exitingAnimationData=structuredClone(AnimationsData[transitionData.exiting]);var enteringAnimationData=structuredClone(AnimationsData[transitionData.entering]);var additionalExitingData={translateX:`${transitionData.translateX}px`,translateY:`${transitionData.translateY}px`,scale:`${transitionData.scaleX},${transitionData.scaleY}`};var additionalEnteringData={translateX:`0px`,translateY:`0px`,scale:`1,1`};var keyframeData={name:name,style:{},duration:300};addTransformToKeepPosition(keyframeData.style,exitingAnimationData.style,additionalExitingData,true);addTransformToKeepPosition(keyframeData.style,enteringAnimationData.style,additionalEnteringData,false);hideComponentBetweenAnimations(keyframeData.style);return keyframeData;}","map":{"version":3,"names":["_defineProperty","_slicedToArray","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","AnimationsData","ExitingFinalStep","EnteringStartStep","addTransformToKeepPosition","keyframeStyleData","animationStyle","transformData","isExiting","_ref","entries","_ref2","timestamp","styles","transform","undefined","unshift","newTimestamp","parseInt","index","Math","min","hideComponentBetweenAnimations","opacityInStep","Map","opacity","set","_ref3","_ref4","step","EntryExitTransition","name","transitionData","exitingAnimationData","structuredClone","exiting","enteringAnimationData","entering","additionalExitingData","translateX","translateY","scale","scaleX","scaleY","additionalEnteringData","keyframeData","style","duration"],"sources":["C:\\Users\\Jorn\\Documents\\hitster\\node_modules\\react-native-reanimated\\src\\layoutReanimation\\web\\transition\\EntryExit.web.ts"],"sourcesContent":["'use strict';\nimport type {\n  AnimationData,\n  AnimationStyle,\n  TransitionData,\n} from '../animationParser';\nimport { AnimationsData } from '../config';\n\nconst ExitingFinalStep = 49;\nconst EnteringStartStep = 50;\n\ntype TransformData = {\n  translateX: string;\n  translateY: string;\n  scale: string;\n};\n\n// Layout transitions on web work in \"reverse order\". It means that the element is rendered at its destination and then, at the beginning of the animation,\n// we move it back to its starting point.\n// This function is responsible for adding transition data into beginning of each keyframe step.\n// Doing so will ensure that the element will perform animation from correct position.\nfunction addTransformToKeepPosition(\n  keyframeStyleData: Record<number, AnimationStyle>,\n  animationStyle: Record<number, AnimationStyle>,\n  transformData: TransformData,\n  isExiting: boolean\n) {\n  for (const [timestamp, styles] of Object.entries(animationStyle)) {\n    if (styles.transform !== undefined) {\n      // If transform was defined, we want to put transform from transition at the beginning, hence we use `unshift`\n      styles.transform.unshift(transformData);\n    } else {\n      // If transform was undefined, we simply add transform from transition\n      styles.transform = [transformData];\n    }\n\n    const newTimestamp = parseInt(timestamp) / 2;\n    const index = isExiting\n      ? Math.min(newTimestamp, ExitingFinalStep) // We want to squeeze exiting animation from range 0-100 into range 0-49\n      : newTimestamp + EnteringStartStep; // Entering animation will start from 50 and go up to 100\n\n    keyframeStyleData[`${index}`] = styles;\n  }\n}\n\n// EntryExit transition consists of two animations - exiting and entering.\n// In Keyframes one cannot simply specify animation for given frame. Switching from one animation\n// to the other one between steps 49 and 50 may lead to flickers, since browser tries to interpolate\n// one step into the other. To avoid that, we set components' `opacity` to 0 right before switching animation\n// and set it again to 1 when component is in right position. Hiding component between animations\n// prevents flickers.\nfunction hideComponentBetweenAnimations(\n  keyframeStyleData: Record<number, AnimationStyle>\n) {\n  // We have to take into account that some animations have already defined `opacity`.\n  // In that case, we don't want to override it.\n  const opacityInStep = new Map<number, number>();\n\n  if (keyframeStyleData[0].opacity === undefined) {\n    opacityInStep.set(48, 1);\n    opacityInStep.set(49, 0);\n  }\n\n  if (keyframeStyleData[50].opacity === undefined) {\n    opacityInStep.set(50, 0);\n    opacityInStep.set(51, 1);\n  }\n\n  for (const [step, opacity] of opacityInStep) {\n    keyframeStyleData[step] = {\n      ...keyframeStyleData[step],\n      opacity,\n    };\n  }\n}\n\nexport function EntryExitTransition(\n  name: string,\n  transitionData: TransitionData\n) {\n  const exitingAnimationData = structuredClone(\n    AnimationsData[transitionData.exiting]\n  );\n  const enteringAnimationData = structuredClone(\n    AnimationsData[transitionData.entering]\n  );\n\n  const additionalExitingData: TransformData = {\n    translateX: `${transitionData.translateX}px`,\n    translateY: `${transitionData.translateY}px`,\n    scale: `${transitionData.scaleX},${transitionData.scaleY}`,\n  };\n\n  const additionalEnteringData: TransformData = {\n    translateX: `0px`,\n    translateY: `0px`,\n    scale: `1,1`,\n  };\n\n  const keyframeData: AnimationData = {\n    name,\n    style: {},\n    duration: 300,\n  };\n\n  addTransformToKeepPosition(\n    keyframeData.style,\n    exitingAnimationData.style,\n    additionalExitingData,\n    true\n  );\n\n  addTransformToKeepPosition(\n    keyframeData.style,\n    enteringAnimationData.style,\n    additionalEnteringData,\n    false\n  );\n\n  hideComponentBetweenAnimations(keyframeData.style);\n\n  return keyframeData;\n}\n"],"mappings":"AAAA,YAAY,QAAAA,eAAA,oDAAAC,cAAA,qDAAAC,QAAAC,CAAA,CAAAC,CAAA,MAAAC,CAAA,CAAAC,MAAA,CAAAC,IAAA,CAAAJ,CAAA,KAAAG,MAAA,CAAAE,qBAAA,MAAAC,CAAA,CAAAH,MAAA,CAAAE,qBAAA,CAAAL,CAAA,EAAAC,CAAA,GAAAK,CAAA,CAAAA,CAAA,CAAAC,MAAA,UAAAN,CAAA,SAAAE,MAAA,CAAAK,wBAAA,CAAAR,CAAA,CAAAC,CAAA,EAAAQ,UAAA,KAAAP,CAAA,CAAAQ,IAAA,CAAAC,KAAA,CAAAT,CAAA,CAAAI,CAAA,UAAAJ,CAAA,WAAAU,cAAAZ,CAAA,UAAAC,CAAA,GAAAA,CAAA,CAAAY,SAAA,CAAAC,MAAA,CAAAb,CAAA,QAAAC,CAAA,OAAAW,SAAA,CAAAZ,CAAA,EAAAY,SAAA,CAAAZ,CAAA,KAAAA,CAAA,GAAAF,OAAA,CAAAI,MAAA,CAAAD,CAAA,MAAAa,OAAA,UAAAd,CAAA,EAAAJ,eAAA,CAAAG,CAAA,CAAAC,CAAA,CAAAC,CAAA,CAAAD,CAAA,MAAAE,MAAA,CAAAa,yBAAA,CAAAb,MAAA,CAAAc,gBAAA,CAAAjB,CAAA,CAAAG,MAAA,CAAAa,yBAAA,CAAAd,CAAA,GAAAH,OAAA,CAAAI,MAAA,CAAAD,CAAA,GAAAa,OAAA,UAAAd,CAAA,EAAAE,MAAA,CAAAe,cAAA,CAAAlB,CAAA,CAAAC,CAAA,CAAAE,MAAA,CAAAK,wBAAA,CAAAN,CAAA,CAAAD,CAAA,cAAAD,CAAA,EAMZ,OAASmB,cAAc,KAAQ,cAAW,CAE1C,GAAM,CAAAC,gBAAgB,CAAG,EAAE,CAC3B,GAAM,CAAAC,iBAAiB,CAAG,EAAE,CAY5B,QAAS,CAAAC,0BAA0BA,CACjCC,iBAAiD,CACjDC,cAA8C,CAC9CC,aAA4B,CAC5BC,SAAkB,CAClB,CACA,QAAAC,IAAA,GAAkC,CAAAxB,MAAM,CAACyB,OAAO,CAACJ,cAAc,CAAC,CAAE,KAAAK,KAAA,CAAA/B,cAAA,CAAA6B,IAAA,OAAtD,CAAAG,SAAS,CAAAD,KAAA,OAAE,CAAAE,MAAM,CAAAF,KAAA,IAC3B,GAAIE,MAAM,CAACC,SAAS,GAAKC,SAAS,CAAE,CAElCF,MAAM,CAACC,SAAS,CAACE,OAAO,CAACT,aAAa,CAAC,CACzC,CAAC,IAAM,CAELM,MAAM,CAACC,SAAS,CAAG,CAACP,aAAa,CAAC,CACpC,CAEA,GAAM,CAAAU,YAAY,CAAGC,QAAQ,CAACN,SAAS,CAAC,CAAG,CAAC,CAC5C,GAAM,CAAAO,KAAK,CAAGX,SAAS,CACnBY,IAAI,CAACC,GAAG,CAACJ,YAAY,CAAEf,gBAAgB,CAAC,CACxCe,YAAY,CAAGd,iBAAiB,CAEpCE,iBAAiB,CAAC,GAAGc,KAAK,EAAE,CAAC,CAAGN,MAAM,CACxC,CACF,CAQA,QAAS,CAAAS,8BAA8BA,CACrCjB,iBAAiD,CACjD,CAGA,GAAM,CAAAkB,aAAa,CAAG,GAAI,CAAAC,GAAG,CAAiB,CAAC,CAE/C,GAAInB,iBAAiB,CAAC,CAAC,CAAC,CAACoB,OAAO,GAAKV,SAAS,CAAE,CAC9CQ,aAAa,CAACG,GAAG,CAAC,EAAE,CAAE,CAAC,CAAC,CACxBH,aAAa,CAACG,GAAG,CAAC,EAAE,CAAE,CAAC,CAAC,CAC1B,CAEA,GAAIrB,iBAAiB,CAAC,EAAE,CAAC,CAACoB,OAAO,GAAKV,SAAS,CAAE,CAC/CQ,aAAa,CAACG,GAAG,CAAC,EAAE,CAAE,CAAC,CAAC,CACxBH,aAAa,CAACG,GAAG,CAAC,EAAE,CAAE,CAAC,CAAC,CAC1B,CAEA,QAAAC,KAAA,GAA8B,CAAAJ,aAAa,CAAE,KAAAK,KAAA,CAAAhD,cAAA,CAAA+C,KAAA,OAAjC,CAAAE,IAAI,CAAAD,KAAA,OAAE,CAAAH,OAAO,CAAAG,KAAA,IACvBvB,iBAAiB,CAACwB,IAAI,CAAC,CAAAnC,aAAA,CAAAA,aAAA,IAClBW,iBAAiB,CAACwB,IAAI,CAAC,MAC1BJ,OAAA,CAAAA,OAAA,EACD,CACH,CACF,CAEA,MAAO,SAAS,CAAAK,mBAAmBA,CACjCC,IAAY,CACZC,cAA8B,CAC9B,CACA,GAAM,CAAAC,oBAAoB,CAAGC,eAAe,CAC1CjC,cAAc,CAAC+B,cAAc,CAACG,OAAO,CACvC,CAAC,CACD,GAAM,CAAAC,qBAAqB,CAAGF,eAAe,CAC3CjC,cAAc,CAAC+B,cAAc,CAACK,QAAQ,CACxC,CAAC,CAED,GAAM,CAAAC,qBAAoC,CAAG,CAC3CC,UAAU,CAAE,GAAGP,cAAc,CAACO,UAAU,IAAI,CAC5CC,UAAU,CAAE,GAAGR,cAAc,CAACQ,UAAU,IAAI,CAC5CC,KAAK,CAAE,GAAGT,cAAc,CAACU,MAAM,IAAIV,cAAc,CAACW,MAAM,EAC1D,CAAC,CAED,GAAM,CAAAC,sBAAqC,CAAG,CAC5CL,UAAU,CAAE,KAAK,CACjBC,UAAU,CAAE,KAAK,CACjBC,KAAK,CAAE,KACT,CAAC,CAED,GAAM,CAAAI,YAA2B,CAAG,CAClCd,IAAI,CAAJA,IAAI,CACJe,KAAK,CAAE,CAAC,CAAC,CACTC,QAAQ,CAAE,GACZ,CAAC,CAED3C,0BAA0B,CACxByC,YAAY,CAACC,KAAK,CAClBb,oBAAoB,CAACa,KAAK,CAC1BR,qBAAqB,CACrB,IACF,CAAC,CAEDlC,0BAA0B,CACxByC,YAAY,CAACC,KAAK,CAClBV,qBAAqB,CAACU,KAAK,CAC3BF,sBAAsB,CACtB,KACF,CAAC,CAEDtB,8BAA8B,CAACuB,YAAY,CAACC,KAAK,CAAC,CAElD,MAAO,CAAAD,YAAY,CACrB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}