{"ast":null,"code":"'use strict';import{useRef}from'react';import Platform from\"react-native-web/dist/exports/Platform\";import{getShadowNodeWrapperFromRef}from'../fabricUtils';import{isFabric,isWeb}from\"../PlatformChecker.js\";import{findNodeHandle}from'../platformFunctions/findNodeHandle';import{shareableMappingCache}from\"../shareableMappingCache.js\";import{makeShareableCloneRecursive}from\"../shareables.js\";import{useSharedValue}from\"./useSharedValue.js\";var IS_WEB=isWeb();function getComponentOrScrollable(component){if(isFabric()&&component.getNativeScrollRef){return component.getNativeScrollRef();}else if(!isFabric()&&component.getScrollableNode){return component.getScrollableNode();}return component;}var _worklet_13436670454384_init_data={code:\"function useAnimatedRefJs1(){const{tag,viewName}=this.__closure;const f=function(){return tag.value;};f.viewName=viewName;return f;}\"};export function useAnimatedRef(){var tag=useSharedValue(-1);var viewName=useSharedValue(null);var ref=useRef(null);if(!ref.current){var _fun=function fun(component){if(component){var getTagValueFunction=isFabric()?getShadowNodeWrapperFromRef:findNodeHandle;var getTagOrShadowNodeWrapper=function getTagOrShadowNodeWrapper(){return IS_WEB?getComponentOrScrollable(component):getTagValueFunction(getComponentOrScrollable(component));};tag.value=getTagOrShadowNodeWrapper();_fun.getTag=isFabric()?function(){return findNodeHandle(getComponentOrScrollable(component));}:getTagOrShadowNodeWrapper;_fun.current=component;if(\"web\"==='ios'&&!isFabric()){var _component$viewConfig;viewName.value=(component==null?void 0:(_component$viewConfig=component.viewConfig)==null?void 0:_component$viewConfig.uiViewClassName)||'RCTView';}}return tag.value;};_fun.current=null;var animatedRefShareableHandle=makeShareableCloneRecursive({__init:function(){var useAnimatedRefJs1=function useAnimatedRefJs1(){var f=function f(){return tag.value;};f.viewName=viewName;return f;};useAnimatedRefJs1.__closure={tag:tag,viewName:viewName};useAnimatedRefJs1.__workletHash=13436670454384;useAnimatedRefJs1.__initData=_worklet_13436670454384_init_data;return useAnimatedRefJs1;}()});shareableMappingCache.set(_fun,animatedRefShareableHandle);ref.current=_fun;}return ref.current;}","map":{"version":3,"names":["useRef","Platform","getShadowNodeWrapperFromRef","isFabric","isWeb","findNodeHandle","shareableMappingCache","makeShareableCloneRecursive","useSharedValue","IS_WEB","getComponentOrScrollable","component","getNativeScrollRef","getScrollableNode","_worklet_13436670454384_init_data","code","useAnimatedRef","tag","viewName","ref","current","fun","getTagValueFunction","getTagOrShadowNodeWrapper","value","getTag","_component$viewConfig","viewConfig","uiViewClassName","animatedRefShareableHandle","__init","useAnimatedRefJs1","f","__closure","__workletHash","__initData","set"],"sources":["C:\\Users\\Jorn\\Documents\\hitster\\node_modules\\react-native-reanimated\\src\\hook\\useAnimatedRef.ts"],"sourcesContent":["'use strict';\nimport type { Component } from 'react';\nimport { useRef } from 'react';\nimport type { FlatList, ScrollView } from 'react-native';\nimport { Platform } from 'react-native';\n\nimport type { ShadowNodeWrapper } from '../commonTypes';\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport { isFabric, isWeb } from '../PlatformChecker';\nimport { findNodeHandle } from '../platformFunctions/findNodeHandle';\nimport { shareableMappingCache } from '../shareableMappingCache';\nimport { makeShareableCloneRecursive } from '../shareables';\nimport type { AnimatedRef, AnimatedRefOnUI } from './commonTypes';\nimport { useSharedValue } from './useSharedValue';\n\nconst IS_WEB = isWeb();\n\ninterface MaybeScrollableComponent extends Component {\n  getNativeScrollRef?: FlatList['getNativeScrollRef'];\n  getScrollableNode?:\n    | ScrollView['getScrollableNode']\n    | FlatList['getScrollableNode'];\n  viewConfig?: {\n    uiViewClassName?: string;\n  };\n}\n\nfunction getComponentOrScrollable(component: MaybeScrollableComponent) {\n  if (isFabric() && component.getNativeScrollRef) {\n    return component.getNativeScrollRef();\n  } else if (!isFabric() && component.getScrollableNode) {\n    return component.getScrollableNode();\n  }\n  return component;\n}\n\n/**\n * Lets you get a reference of a view that you can use inside a worklet.\n *\n * @returns An object with a `.current` property which contains an instance of a\n *   component.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/core/useAnimatedRef\n */\nexport function useAnimatedRef<\n  TComponent extends Component,\n>(): AnimatedRef<TComponent> {\n  const tag = useSharedValue<number | ShadowNodeWrapper | null>(-1);\n  const viewName = useSharedValue<string | null>(null);\n\n  const ref = useRef<AnimatedRef<TComponent> | null>(null);\n\n  if (!ref.current) {\n    const fun: AnimatedRef<TComponent> = <AnimatedRef<TComponent>>((\n      component\n    ) => {\n      // enters when ref is set by attaching to a component\n      if (component) {\n        const getTagValueFunction = isFabric()\n          ? getShadowNodeWrapperFromRef\n          : findNodeHandle;\n\n        const getTagOrShadowNodeWrapper = () => {\n          return IS_WEB\n            ? getComponentOrScrollable(component)\n            : getTagValueFunction(getComponentOrScrollable(component));\n        };\n\n        tag.value = getTagOrShadowNodeWrapper();\n\n        // On Fabric we have to unwrap the tag from the shadow node wrapper\n        fun.getTag = isFabric()\n          ? () => findNodeHandle(getComponentOrScrollable(component))\n          : getTagOrShadowNodeWrapper;\n\n        fun.current = component;\n        // viewName is required only on iOS with Paper\n        if (Platform.OS === 'ios' && !isFabric()) {\n          viewName.value =\n            (component as MaybeScrollableComponent)?.viewConfig\n              ?.uiViewClassName || 'RCTView';\n        }\n      }\n      return tag.value;\n    });\n\n    fun.current = null;\n\n    const animatedRefShareableHandle = makeShareableCloneRecursive({\n      __init: () => {\n        'worklet';\n        const f: AnimatedRefOnUI = () => tag.value;\n        f.viewName = viewName;\n        return f;\n      },\n    });\n    shareableMappingCache.set(fun, animatedRefShareableHandle);\n    ref.current = fun;\n  }\n\n  return ref.current;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}