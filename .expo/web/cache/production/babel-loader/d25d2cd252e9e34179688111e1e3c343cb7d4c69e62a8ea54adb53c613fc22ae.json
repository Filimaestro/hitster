{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function _callSuper(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import{EventTypes}from'../interfaces';import EventManager from'./EventManager';import{PointerType}from'../../PointerType';var KeyboardEventManager=function(_EventManager){function KeyboardEventManager(){var _this;_classCallCheck(this,KeyboardEventManager);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_callSuper(this,KeyboardEventManager,[].concat(args));_defineProperty(_this,\"activationKeys\",['Enter',' ']);_defineProperty(_this,\"cancelationKeys\",['Tab']);_defineProperty(_this,\"isPressed\",false);_defineProperty(_this,\"keyDownCallback\",function(event){if(_this.cancelationKeys.indexOf(event.key)!==-1&&_this.isPressed){_this.dispatchEvent(event,EventTypes.CANCEL);return;}if(_this.activationKeys.indexOf(event.key)===-1){return;}_this.dispatchEvent(event,EventTypes.DOWN);});_defineProperty(_this,\"keyUpCallback\",function(event){if(_this.activationKeys.indexOf(event.key)===-1||!_this.isPressed){return;}_this.dispatchEvent(event,EventTypes.UP);});return _this;}_inherits(KeyboardEventManager,_EventManager);return _createClass(KeyboardEventManager,[{key:\"dispatchEvent\",value:function dispatchEvent(event,eventType){if(!(event.target instanceof HTMLElement)){return;}var adaptedEvent=this.mapEvent(event,eventType);switch(eventType){case EventTypes.UP:this.isPressed=false;this.onPointerUp(adaptedEvent);break;case EventTypes.DOWN:this.isPressed=true;this.onPointerDown(adaptedEvent);break;case EventTypes.CANCEL:this.isPressed=false;this.onPointerCancel(adaptedEvent);break;}}},{key:\"registerListeners\",value:function registerListeners(){this.view.addEventListener('keydown',this.keyDownCallback);this.view.addEventListener('keyup',this.keyUpCallback);}},{key:\"unregisterListeners\",value:function unregisterListeners(){this.view.removeEventListener('keydown',this.keyDownCallback);this.view.removeEventListener('keyup',this.keyUpCallback);}},{key:\"mapEvent\",value:function mapEvent(event,eventType){var viewRect=event.target.getBoundingClientRect();var viewportPosition={x:(viewRect===null||viewRect===void 0?void 0:viewRect.x)+(viewRect===null||viewRect===void 0?void 0:viewRect.width)/2,y:(viewRect===null||viewRect===void 0?void 0:viewRect.y)+(viewRect===null||viewRect===void 0?void 0:viewRect.height)/2};var relativePosition={x:(viewRect===null||viewRect===void 0?void 0:viewRect.width)/2,y:(viewRect===null||viewRect===void 0?void 0:viewRect.height)/2};return{x:viewportPosition.x,y:viewportPosition.y,offsetX:relativePosition.x,offsetY:relativePosition.y,pointerId:0,eventType:eventType,pointerType:PointerType.KEY,time:event.timeStamp};}}]);}(EventManager);export{KeyboardEventManager as default};","map":{"version":3,"names":["EventTypes","EventManager","PointerType","KeyboardEventManager","_EventManager","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_defineProperty","event","cancelationKeys","indexOf","key","isPressed","dispatchEvent","CANCEL","activationKeys","DOWN","UP","_inherits","_createClass","value","eventType","target","HTMLElement","adaptedEvent","mapEvent","onPointerUp","onPointerDown","onPointerCancel","registerListeners","view","addEventListener","keyDownCallback","keyUpCallback","unregisterListeners","removeEventListener","viewRect","getBoundingClientRect","viewportPosition","x","width","y","height","relativePosition","offsetX","offsetY","pointerId","pointerType","KEY","time","timeStamp","default"],"sources":["C:\\Users\\Jorn\\Documents\\hitster\\node_modules\\react-native-gesture-handler\\lib\\module\\web\\tools\\KeyboardEventManager.ts"],"sourcesContent":["import { AdaptedEvent, EventTypes } from '../interfaces';\nimport EventManager from './EventManager';\nimport { PointerType } from '../../PointerType';\n\nexport default class KeyboardEventManager extends EventManager<HTMLElement> {\n  private activationKeys = ['Enter', ' '];\n  private cancelationKeys = ['Tab'];\n  private isPressed = false;\n\n  private keyDownCallback = (event: KeyboardEvent): void => {\n    if (this.cancelationKeys.indexOf(event.key) !== -1 && this.isPressed) {\n      this.dispatchEvent(event, EventTypes.CANCEL);\n      return;\n    }\n\n    if (this.activationKeys.indexOf(event.key) === -1) {\n      return;\n    }\n\n    this.dispatchEvent(event, EventTypes.DOWN);\n  };\n\n  private keyUpCallback = (event: KeyboardEvent): void => {\n    if (this.activationKeys.indexOf(event.key) === -1 || !this.isPressed) {\n      return;\n    }\n\n    this.dispatchEvent(event, EventTypes.UP);\n  };\n\n  private dispatchEvent(event: KeyboardEvent, eventType: EventTypes) {\n    if (!(event.target instanceof HTMLElement)) {\n      return;\n    }\n\n    const adaptedEvent = this.mapEvent(event, eventType);\n\n    switch (eventType) {\n      case EventTypes.UP:\n        this.isPressed = false;\n        this.onPointerUp(adaptedEvent);\n        break;\n      case EventTypes.DOWN:\n        this.isPressed = true;\n        this.onPointerDown(adaptedEvent);\n        break;\n      case EventTypes.CANCEL:\n        this.isPressed = false;\n        this.onPointerCancel(adaptedEvent);\n        break;\n    }\n  }\n\n  public registerListeners(): void {\n    this.view.addEventListener('keydown', this.keyDownCallback);\n    this.view.addEventListener('keyup', this.keyUpCallback);\n  }\n\n  public unregisterListeners(): void {\n    this.view.removeEventListener('keydown', this.keyDownCallback);\n    this.view.removeEventListener('keyup', this.keyUpCallback);\n  }\n\n  protected mapEvent(\n    event: KeyboardEvent,\n    eventType: EventTypes\n  ): AdaptedEvent {\n    const viewRect = (event.target as HTMLElement).getBoundingClientRect();\n\n    const viewportPosition = {\n      x: viewRect?.x + viewRect?.width / 2,\n      y: viewRect?.y + viewRect?.height / 2,\n    };\n\n    const relativePosition = {\n      x: viewRect?.width / 2,\n      y: viewRect?.height / 2,\n    };\n\n    return {\n      x: viewportPosition.x,\n      y: viewportPosition.y,\n      offsetX: relativePosition.x,\n      offsetY: relativePosition.y,\n      pointerId: 0,\n      eventType: eventType,\n      pointerType: PointerType.KEY,\n      time: event.timeStamp,\n    };\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}