{"ast":null,"code":"'use strict';import{ReanimatedError}from\"../../errors.js\";import{defineAnimation,getReduceMotionForAnimation}from\"../util.js\";import{rigidDecay}from\"./rigidDecay.js\";import{rubberBandDecay}from\"./rubberBandDecay.js\";import{isValidRubberBandConfig}from\"./utils.js\";var _worklet_8595752523972_init_data={code:\"function validateConfig_decayJs1(config){if(config.clamp){if(!Array.isArray(config.clamp)){throw new ReanimatedError(\\\"`config.clamp` must be an array but is \\\"+typeof config.clamp+\\\".\\\");}if(config.clamp.length!==2){throw new ReanimatedError(\\\"`clamp array` must contain 2 items but is given \\\"+config.clamp.length+\\\".\\\");}}if(config.velocityFactor<=0){throw new ReanimatedError(\\\"`config.velocityFactor` must be greater then 0 but is \\\"+config.velocityFactor+\\\".\\\");}if(config.rubberBandEffect&&!config.clamp){throw new ReanimatedError('You need to set `clamp` property when using `rubberBandEffect`.');}}\"};var validateConfig=function(){var validateConfig=function validateConfig(config){if(config.clamp){if(!Array.isArray(config.clamp)){throw new ReanimatedError(`\\`config.clamp\\` must be an array but is ${typeof config.clamp}.`);}if(config.clamp.length!==2){throw new ReanimatedError(`\\`clamp array\\` must contain 2 items but is given ${config.clamp.length}.`);}}if(config.velocityFactor<=0){throw new ReanimatedError(`\\`config.velocityFactor\\` must be greater then 0 but is ${config.velocityFactor}.`);}if(config.rubberBandEffect&&!config.clamp){throw new ReanimatedError('You need to set `clamp` property when using `rubberBandEffect`.');}};validateConfig.__closure={};validateConfig.__workletHash=8595752523972;validateConfig.__initData=_worklet_8595752523972_init_data;return validateConfig;}();var _worklet_2840686572737_init_data={code:\"function decayJs2(userConfig,callback){const{defineAnimation,isValidRubberBandConfig,rubberBandDecay,rigidDecay,validateConfig,getReduceMotionForAnimation}=this.__closure;return defineAnimation(0,function(){'worklet';var _config$velocity;const config={deceleration:0.998,velocityFactor:1,velocity:0,rubberBandFactor:0.6};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}const decay=isValidRubberBandConfig(config)?function(animation,now){return rubberBandDecay(animation,now,config);}:function(animation,now){return rigidDecay(animation,now,config);};function onStart(animation,value,now){const initialVelocity=config.velocity;animation.current=value;animation.lastTimestamp=now;animation.startTimestamp=now;animation.initialVelocity=initialVelocity;animation.velocity=initialVelocity;validateConfig(config);if(animation.reduceMotion&&config.clamp){if(value<config.clamp[0]){animation.current=config.clamp[0];}else if(value>config.clamp[1]){animation.current=config.clamp[1];}}}return{onFrame:decay,onStart:onStart,callback:callback,velocity:(_config$velocity=config.velocity)!==null&&_config$velocity!==void 0?_config$velocity:0,initialVelocity:0,current:undefined,lastTimestamp:0,startTimestamp:0,reduceMotion:getReduceMotionForAnimation(config.reduceMotion)};});}\"};var _worklet_6883436981550_init_data={code:\"function decayJs3(){const{userConfig,isValidRubberBandConfig,rubberBandDecay,rigidDecay,validateConfig,callback,getReduceMotionForAnimation}=this.__closure;var _config$velocity;const config={deceleration:0.998,velocityFactor:1,velocity:0,rubberBandFactor:0.6};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}const decay=isValidRubberBandConfig(config)?function(animation,now){return rubberBandDecay(animation,now,config);}:function(animation,now){return rigidDecay(animation,now,config);};function onStart(animation,value,now){const initialVelocity=config.velocity;animation.current=value;animation.lastTimestamp=now;animation.startTimestamp=now;animation.initialVelocity=initialVelocity;animation.velocity=initialVelocity;validateConfig(config);if(animation.reduceMotion&&config.clamp){if(value<config.clamp[0]){animation.current=config.clamp[0];}else if(value>config.clamp[1]){animation.current=config.clamp[1];}}}return{onFrame:decay,onStart:onStart,callback:callback,velocity:(_config$velocity=config.velocity)!==null&&_config$velocity!==void 0?_config$velocity:0,initialVelocity:0,current:undefined,lastTimestamp:0,startTimestamp:0,reduceMotion:getReduceMotionForAnimation(config.reduceMotion)};}\"};export var withDecay=function(){var decayJs2=function decayJs2(userConfig,callback){return defineAnimation(0,function(){var decayJs3=function decayJs3(){var _config$velocity;var config={deceleration:0.998,velocityFactor:1,velocity:0,rubberBandFactor:0.6};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}var decay=isValidRubberBandConfig(config)?function(animation,now){return rubberBandDecay(animation,now,config);}:function(animation,now){return rigidDecay(animation,now,config);};function onStart(animation,value,now){var initialVelocity=config.velocity;animation.current=value;animation.lastTimestamp=now;animation.startTimestamp=now;animation.initialVelocity=initialVelocity;animation.velocity=initialVelocity;validateConfig(config);if(animation.reduceMotion&&config.clamp){if(value<config.clamp[0]){animation.current=config.clamp[0];}else if(value>config.clamp[1]){animation.current=config.clamp[1];}}}return{onFrame:decay,onStart:onStart,callback:callback,velocity:(_config$velocity=config.velocity)!=null?_config$velocity:0,initialVelocity:0,current:undefined,lastTimestamp:0,startTimestamp:0,reduceMotion:getReduceMotionForAnimation(config.reduceMotion)};};decayJs3.__closure={userConfig:userConfig,isValidRubberBandConfig:isValidRubberBandConfig,rubberBandDecay:rubberBandDecay,rigidDecay:rigidDecay,validateConfig:validateConfig,callback:callback,getReduceMotionForAnimation:getReduceMotionForAnimation};decayJs3.__workletHash=6883436981550;decayJs3.__initData=_worklet_6883436981550_init_data;return decayJs3;}());};decayJs2.__closure={defineAnimation:defineAnimation,isValidRubberBandConfig:isValidRubberBandConfig,rubberBandDecay:rubberBandDecay,rigidDecay:rigidDecay,validateConfig:validateConfig,getReduceMotionForAnimation:getReduceMotionForAnimation};decayJs2.__workletHash=2840686572737;decayJs2.__initData=_worklet_2840686572737_init_data;return decayJs2;}();","map":{"version":3,"names":["ReanimatedError","defineAnimation","getReduceMotionForAnimation","rigidDecay","rubberBandDecay","isValidRubberBandConfig","_worklet_8595752523972_init_data","code","validateConfig","config","clamp","Array","isArray","length","velocityFactor","rubberBandEffect","__closure","__workletHash","__initData","_worklet_2840686572737_init_data","_worklet_6883436981550_init_data","withDecay","decayJs2","userConfig","callback","decayJs3","_config$velocity","deceleration","velocity","rubberBandFactor","Object","keys","forEach","key","decay","animation","now","onStart","value","initialVelocity","current","lastTimestamp","startTimestamp","reduceMotion","onFrame","undefined"],"sources":["C:\\Users\\Jorn\\Documents\\hitster\\node_modules\\react-native-reanimated\\src\\animation\\decay\\decay.ts"],"sourcesContent":["'use strict';\nimport type {\n  Animation,\n  AnimationCallback,\n  Timestamp,\n} from '../../commonTypes';\nimport { ReanimatedError } from '../../errors';\nimport { defineAnimation, getReduceMotionForAnimation } from '../util';\nimport { rigidDecay } from './rigidDecay';\nimport { rubberBandDecay } from './rubberBandDecay';\nimport type {\n  DecayAnimation,\n  DecayConfig,\n  DefaultDecayConfig,\n  InnerDecayAnimation,\n} from './utils';\nimport { isValidRubberBandConfig } from './utils';\n\nexport type WithDecayConfig = DecayConfig;\n\n// TODO TYPESCRIPT This is a temporary type to get rid of .d.ts file.\ntype withDecayType = (\n  userConfig: DecayConfig,\n  callback?: AnimationCallback\n) => number;\n\nfunction validateConfig(config: DefaultDecayConfig): void {\n  'worklet';\n  if (config.clamp) {\n    if (!Array.isArray(config.clamp)) {\n      throw new ReanimatedError(\n        `\\`config.clamp\\` must be an array but is ${typeof config.clamp}.`\n      );\n    }\n    if (config.clamp.length !== 2) {\n      throw new ReanimatedError(\n        `\\`clamp array\\` must contain 2 items but is given ${\n          config.clamp.length as number\n        }.`\n      );\n    }\n  }\n  if (config.velocityFactor <= 0) {\n    throw new ReanimatedError(\n      `\\`config.velocityFactor\\` must be greater then 0 but is ${config.velocityFactor}.`\n    );\n  }\n  if (config.rubberBandEffect && !config.clamp) {\n    throw new ReanimatedError(\n      'You need to set `clamp` property when using `rubberBandEffect`.'\n    );\n  }\n}\n\n/**\n * Lets you create animations that mimic objects in motion with friction.\n *\n * @param config - The decay animation configuration - {@link DecayConfig}.\n * @param callback - A function called upon animation completion -\n *   {@link AnimationCallback}.\n * @returns An [animation\n *   object](https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/glossary#animation-object)\n *   which holds the current state of the animation.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/animations/withDecay\n */\nexport const withDecay = function (\n  userConfig: DecayConfig,\n  callback?: AnimationCallback\n): Animation<DecayAnimation> {\n  'worklet';\n\n  return defineAnimation<DecayAnimation>(0, () => {\n    'worklet';\n    const config: DefaultDecayConfig = {\n      deceleration: 0.998,\n      velocityFactor: 1,\n      velocity: 0,\n      rubberBandFactor: 0.6,\n    };\n    if (userConfig) {\n      Object.keys(userConfig).forEach(\n        (key) =>\n          ((config as any)[key] = userConfig[key as keyof typeof userConfig])\n      );\n    }\n\n    const decay: (animation: InnerDecayAnimation, now: number) => boolean =\n      isValidRubberBandConfig(config)\n        ? (animation, now) => rubberBandDecay(animation, now, config)\n        : (animation, now) => rigidDecay(animation, now, config);\n\n    function onStart(\n      animation: DecayAnimation,\n      value: number,\n      now: Timestamp\n    ): void {\n      const initialVelocity = config.velocity;\n      animation.current = value;\n      animation.lastTimestamp = now;\n      animation.startTimestamp = now;\n      animation.initialVelocity = initialVelocity;\n      animation.velocity = initialVelocity;\n\n      validateConfig(config);\n\n      if (animation.reduceMotion && config.clamp) {\n        if (value < config.clamp[0]) {\n          animation.current = config.clamp[0];\n        } else if (value > config.clamp[1]) {\n          animation.current = config.clamp[1];\n        }\n      }\n    }\n\n    // To ensure the animation is correctly initialized and starts as expected\n    // we need to set its current value to undefined.\n    // Setting current to 0 breaks the animation.\n    return {\n      onFrame: decay,\n      onStart,\n      callback,\n      velocity: config.velocity ?? 0,\n      initialVelocity: 0,\n      current: undefined,\n      lastTimestamp: 0,\n      startTimestamp: 0,\n      reduceMotion: getReduceMotionForAnimation(config.reduceMotion),\n    } as DecayAnimation;\n  });\n} as unknown as withDecayType;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}